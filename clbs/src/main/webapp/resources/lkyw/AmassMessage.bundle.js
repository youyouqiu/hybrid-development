(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{175:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(177);function i(e){var t=e;return s.inflate(t,{to:"string"})}},238:function(e,t){e.exports='<div class="amassDrawer" id="amassDrawer">\r\n  <input type="hidden" id="deviceTypeVal" value="1" />\r\n  <div class="panel panel-default amassLeft">\r\n    <div class="panel-heading">\r\n      <h3 class="panel-title fwb">文本信息下发</h3>\r\n      <div class="actions pull-right">\r\n        <span class="glyphicon glyphicon-remove detail-close drawerCloseBtn"></span>\r\n      </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-5 left-tree">\r\n      <div class="form-group">\r\n        <select name="conmunicationType" id="conmunicationType" class="form-control">\r\n          <option value="13" selected>交通部JT/T808-2013</option>\r\n          <option value="19">交通部JT/T808-2019</option>\r\n        </select>\r\n      </div>\r\n      \x3c!-- 搜索 --\x3e\r\n      <div class="has-feedback fastClear">\r\n        <select name="monitorObject" id="amassMessageType" class="Inlinesearch form-control treeSelect"\r\n          style="left: 1px;padding-right: 18.5px;">\r\n          <option value="monitor" selected="">监控对象</option>\r\n          <option value="assignment">分组</option>\r\n          <option value="vehType">车辆类型</option>\r\n        </select>\r\n        <select name="vehicleType" id="vehicleType" class="form-control"></select>\r\n        <input style="cursor: pointer; background-color: #fafafa;" placeholder="请选择" class="form-control moreQueryGroup"\r\n          id="amassMessageInput" name="monitorTreeInput" type="text" autocomplete="off" />\r\n      </div>\r\n      \x3c!-- 车辆树 --\x3e\r\n      <div class="tree-container">\r\n        <div id="treeLoad" class="tree-load">\r\n          <i class="fa fa-spinner loading-state"></i>正在查询\r\n        </div>\r\n        <div id="treeEmpty" class="tree-empty">未找到监控对象</div>\r\n        <ul id="amassMessageTree" class="ztree ztreeLoadH"></ul>\r\n      </div>\r\n\r\n      \x3c!-- <select name="queryType" id="queryType"\r\n                    class="Inlinesearch form-control treeSelect">\r\n                <option value="monitor">监控对象</option>\r\n                <option value="assignment">分组</option>\r\n                <option value="vehType">车辆类型</option>\r\n            </select>\r\n            \r\n            <input type="text" autocomplete="off" id="batchCondition" class="form-control moreQueryGroup"\r\n                   placeholder="请输入关键字">\r\n            \r\n            <div id="broadTree" class="ztree" style="max-height:574px;overflow-y:auto">\r\n                <ul id="treeList"></ul>\r\n            </div> --\x3e\r\n    </div>\r\n    <div class="col-md-7 col-sm-7 right-table">\r\n      <form id="amassMessageForm" role="form">\r\n        \x3c!-- 交通部JT/T808-2019 显示 通知/服务 --\x3e\r\n        <div id="textType" class="clearfix"></div>\r\n        \x3c!-- 结束 --\x3e\r\n        <div class="form-group" style="position: relative;">\r\n          <button id="quickMessageBtn" type="button" class="btn btn-default btn-off quickMessageBtn"\r\n            style="padding: 3px 5px;font-size: 12px;">快捷消息</button>\r\n          <textarea class="form-control" name="amassMessageTextarea" id="amassMessageTextarea" minlength="1"\r\n            maxlength="79" rows="5"></textarea>\r\n        </div>\r\n        <div class="form-group">\r\n          \x3c!-- 交通部JT/T808-2019 --\x3e\r\n          <div id="amass19" class="clearfix"></div>\r\n          \x3c!-- 交通部JT/T808-2013 --\x3e\r\n          <div id="amass13" class="clearfix"></div>\r\n        </div>\r\n      </form>\r\n      <table id="amassMessageTable" class="table table-striped table-bordered table-hover" cellspacing="0" width="100%">\r\n        <thead>\r\n          <tr>\r\n            <th>监控对象</th>\r\n            <th>下发状态</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id="amassMessageTbody">\r\n\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class="panel-footer detail-footer text-right" style="padding-bottom:11px;">\r\n      <button type="button" class="btn btn-primary btn-sm" id="amassBtn">下发</button>\r\n      <button type="button" class="btn btn-default btn-sm btn-off drawerCloseBtn">关闭</button>\r\n    </div>\r\n  </div>\r\n  <div class="amassRight">\r\n    <div class="ToolPanel clearfix" style="margin-bottom: 15px;">\r\n      <form role="form" class="pull-left">\r\n        <label style="position: relative;"><input type="text" autocomplete="off" class="form-control input-sm"\r\n            id="quickTableQuery" name="simpleQueryParam" placeholder="请输入查询内容" />\r\n        </label>\r\n        <input type="text" style="display:none" />\r\n        <button type="button" id="quickTableSearch" class="btn btn-primary search-btn btn-sm" title="查询"\r\n          style="margin-top: 0;"><i class="glyphicon glyphicon-search"></i> 查询\r\n        </button>\r\n      </form>\r\n      <div class="pull-right">\r\n        <button id="quickTableAdd" class="btn btn-primary btn-sm" type="button" name="add" data-toggle="modal"\r\n          data-target="#editQuickModal" title="新增">\r\n          <i class="glyphicon glyphicon-plus"></i> 新增\r\n        </button>\r\n        <button id="quickTableClose" class="quickTableClose"><i class="fa fa-chevron-left"></i></button>\r\n      </div>\r\n    </div>\r\n    <div class="quickMessageInfo clearfix">\r\n      <span>双击选择所需下发的文本信息</span>\r\n      <span class="pull-right" id="total">合计22条记录</span>\r\n    </div>\r\n    <div class="quickMessages" id="quickMessages">\r\n      <table id="quickMessageTable" class="table table-striped table-bordered table-hover noCheckTable" cellspacing="0"\r\n        width="100%">\r\n        <thead>\r\n          <tr>\r\n            <th width="51" class="text-center">序号</th>\r\n            <th class="text-center">消息内容</th>\r\n            <th width="103" class="text-center">操作</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody id="quickMessageTbody"></tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="modal fade" id="editQuickModal" tabindex="-1" role="dialog" aria-labelledby="editQuickModalLabel"\r\n  aria-hidden="true">\r\n  \x3c!-- <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h5 class="modal-title" id="editQuickModalLabel" style="display: inline-block;">新增/修改消息</h5>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form role="form">\r\n                    <textarea class="form-control" name="editQuickTextarea" id="editQuickTextarea" rows="5" maxlength="79"></textarea>\r\n                    <div class="notice" style="color: #E50C0C;">注：最多可输入79个字符</div>\r\n                </form>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>\r\n                <button type="button" class="btn btn-primary">保存</button>\r\n            </div>\r\n        </div>\r\n    </div> --\x3e\r\n</div>'},239:function(module,exports){module.exports=function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'\r\n<% if (conmunicationType == 19) { %>\r\n    <div class="col-md-12 form-group" id="textType">\r\n        <label class="radio-inline"><input type="radio" name="textType" value="1" checked="checked"> 通知</label>\r\n        <label class="radio-inline"><input type="radio" name="textType" value="2"> 服务</label>\r\n    </div>\r\n<% }; %>   \r\n\r\n',filename:"."};function rethrow(e,t,a,s){var i=t.split("\n"),n=Math.max(s-3,0),r=Math.min(i.length,s+3),o=i.slice(n,r).map((function(e,t){var a=t+n+1;return(a==s?" >> ":"    ")+a+"| "+e})).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+s+"\n"+o+"\n\n"+e.message,e}try{var buf=[];with(locals||{})buf.push("\n"),__stack.lineno=2,19==conmunicationType&&(buf.push('\n    <div class="col-md-12 form-group" id="textType">\n        <label class="radio-inline"><input type="radio" name="textType" value="1" checked="checked"> 通知</label>\n        <label class="radio-inline"><input type="radio" name="textType" value="2"> 服务</label>\n    </div>\n'),__stack.lineno=7),buf.push("   \n\n");return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}},240:function(module,exports){module.exports=function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<% if(conmunicationType == 19) { %> \r\n    <div class="col-md-6">\r\n        <select id="messageTypeOne" name="messageTypeOne" class="form-control" style="margin-bottom: 10px;">\r\n            <option value="1">服务</option>\r\n            <option value="2">紧急</option>\r\n            <option value="3">通知</option>\r\n        </select>\r\n    </div>\r\n    <div class="col-md-6">\r\n        <select id="messageTypeTwo" name="messageTypeTwo" class="form-control" style="margin-bottom: 10px;">\r\n          <option value="0">中心导航信息</option>\r\n          <option value="1">CAN故障码信息</option>\r\n        </select>\r\n    </div>\r\n    <div class="col-md-6"><label><input class="pull-left" name="displayMarks" value="3" checked="checked" type="checkbox"/> &nbsp; 终端显示器显示</label></div>\r\n    <div class="col-md-6"><label><input class="pull-left" name="ttsMarks" value="4" checked="checked" type="checkbox"/> &nbsp; 终端TTS读播</label></div>\r\n<% } %>',filename:"."};function rethrow(e,t,a,s){var i=t.split("\n"),n=Math.max(s-3,0),r=Math.min(i.length,s+3),o=i.slice(n,r).map((function(e,t){var a=t+n+1;return(a==s?" >> ":"    ")+a+"| "+e})).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+s+"\n"+o+"\n\n"+e.message,e}try{var buf=[];with(locals||{})buf.push(""),__stack.lineno=1,19==conmunicationType&&(buf.push(' \n    <div class="col-md-6">\n        <select id="messageTypeOne" name="messageTypeOne" class="form-control" style="margin-bottom: 10px;">\n            <option value="1">服务</option>\n            <option value="2">紧急</option>\n            <option value="3">通知</option>\n        </select>\n    </div>\n    <div class="col-md-6">\n        <select id="messageTypeTwo" name="messageTypeTwo" class="form-control" style="margin-bottom: 10px;">\n          <option value="0">中心导航信息</option>\n          <option value="1">CAN故障码信息</option>\n        </select>\n    </div>\n    <div class="col-md-6"><label><input class="pull-left" name="displayMarks" value="3" checked="checked" type="checkbox"/> &nbsp; 终端显示器显示</label></div>\n    <div class="col-md-6"><label><input class="pull-left" name="ttsMarks" value="4" checked="checked" type="checkbox"/> &nbsp; 终端TTS读播</label></div>\n'),__stack.lineno=17),buf.push("");return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}},241:function(module,exports){module.exports=function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<% if(conmunicationType == 13) { %> \r\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="1" type="checkbox"> &nbsp; 紧急</label></div>\r\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="3" checked="checked" type="checkbox"/> &nbsp; 终端显示器显示</label></div>\r\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="4" checked="checked" type="checkbox"/> &nbsp; 终端TTS读播</label></div>\r\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="5" checked="checked" type="checkbox"/> &nbsp; 广告屏显示</label></div>\r\n<% } %>',filename:"."};function rethrow(e,t,a,s){var i=t.split("\n"),n=Math.max(s-3,0),r=Math.min(i.length,s+3),o=i.slice(n,r).map((function(e,t){var a=t+n+1;return(a==s?" >> ":"    ")+a+"| "+e})).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+s+"\n"+o+"\n\n"+e.message,e}try{var buf=[];with(locals||{})buf.push(""),__stack.lineno=1,13==conmunicationType&&(buf.push(' \n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="1" type="checkbox"> &nbsp; 紧急</label></div>\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="3" checked="checked" type="checkbox"/> &nbsp; 终端显示器显示</label></div>\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="4" checked="checked" type="checkbox"/> &nbsp; 终端TTS读播</label></div>\n    <div class="col-md-6"><label><input class="pull-left" name="marks" value="5" checked="checked" type="checkbox"/> &nbsp; 广告屏显示</label></div>\n'),__stack.lineno=6),buf.push("");return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}},242:function(module,exports){module.exports=function anonymous(locals,filters,escape,rethrow){escape=escape||function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n        <div class="modal-header">\r\n            <h5 class="modal-title" id="editQuickModalLabel" style="display: inline-block;">\r\n                \x3c!-- 新增/修改消息 --\x3e\r\n                <%- type %>消息\r\n            </h5>\r\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                <span aria-hidden="true">&times;</span>\r\n            </button>\r\n        </div>\r\n        <div class="modal-body">\r\n            <form role="form" id="quickForm" style="position: relative;">\r\n                <textarea class="form-control" name="editQuickTextarea" id="editQuickTextarea" rows="5" maxlength="79"><%- content %></textarea>\r\n                \x3c!-- <i class="delIcon"></i> --\x3e\r\n                <button id="quickFormDelete" type="button" class="btn btn-default btn-off quickFormDelete" style="padding: 3px 5px;font-size: 12px;position: absolute;right: 0;bottom: 23px;">快速清除</button>\r\n                <div class="notice" style="color: #E50C0C;">注：最多可输入79个字符</div>\r\n            </form>\r\n        </div>\r\n        <div class="modal-footer">\r\n            <button type="button" class="btn btn-primary" id="saveQuickData">保存</button>\r\n            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>\r\n        </div>\r\n    </div>\r\n</div>',filename:"."};function rethrow(e,t,a,s){var i=t.split("\n"),n=Math.max(s-3,0),r=Math.min(i.length,s+3),o=i.slice(n,r).map((function(e,t){var a=t+n+1;return(a==s?" >> ":"    ")+a+"| "+e})).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+s+"\n"+o+"\n\n"+e.message,e}try{var buf=[];with(locals||{})buf.push('<div class="modal-dialog" role="document">\n    <div class="modal-content">\n        <div class="modal-header">\n            <h5 class="modal-title" id="editQuickModalLabel" style="display: inline-block;">\n                \x3c!-- 新增/修改消息 --\x3e\n                ',(__stack.lineno=6,type),'消息\n            </h5>\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                <span aria-hidden="true">&times;</span>\n            </button>\n        </div>\n        <div class="modal-body">\n            <form role="form" id="quickForm" style="position: relative;">\n                <textarea class="form-control" name="editQuickTextarea" id="editQuickTextarea" rows="5" maxlength="79">',(__stack.lineno=14,content),'</textarea>\n                \x3c!-- <i class="delIcon"></i> --\x3e\n                <button id="quickFormDelete" type="button" class="btn btn-default btn-off quickFormDelete" style="padding: 3px 5px;font-size: 12px;position: absolute;right: 0;bottom: 23px;">快速清除</button>\n                <div class="notice" style="color: #E50C0C;">注：最多可输入79个字符</div>\n            </form>\n        </div>\n        <div class="modal-footer">\n            <button type="button" class="btn btn-primary" id="saveQuickData">保存</button>\n            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>\n        </div>\n    </div>\n</div>');return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}},243:function(e,t,a){},252:function(e,t,a){"use strict";a.r(t);var s=a(7),i=a(175),n=a(22),r=a(238),o=a.n(r),l=a(239),c=a.n(l),d=a(240),u=a.n(d),p=a(241),h=a.n(p),m=a(242),b=a.n(m),g=(a(243),function(e,t,a,s){return new(a||(a=Promise))((function(i,n){function r(e){try{l(s.next(e))}catch(e){n(e)}}function o(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,o)}l((s=s.apply(e,t||[])).next())}))}),y=function(e,t){var a,s,i,n,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,s&&(i=2&n[0]?s.return:n[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,n[1])).done)return i;switch(s=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return r.label++,{value:n[1],done:!1};case 5:r.label++,s=n[1],n=[0];continue;case 7:n=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){r=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){r.label=n[1];break}if(6===n[0]&&r.label<i[1]){r.label=i[1],i=n;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(n);break}i[2]&&r.ops.pop(),r.trys.pop();continue}n=t.call(e,r)}catch(e){n=[6,e],s=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}},f=function(){function e(e,t){this.dependency=t,this.setOption(e)}return e.prototype.setOption=function(e){this.dependency.get("data");this.option=e,this.state={$origin:null,$dom:{$amassDrawer:null,$deviceTypeVal:null,$vehicleType:null,$conmunicationType:null,$amassMessageForm:null,$textType:null,$amass19:null,$amass13:null,$amassBtn:null,$quickMessages:null,$quickMessageBtn:null,$quickTableClose:null,$quickTableQuery:null,$quickTableSearch:null,$quickMessageTbody:null,$quickTotal:null,$quickModal:null,$amassMessageType:null,$amassMessageInput:null},data:{viewWidth:750,selectedMonitor:this.option.vehicleId?this.option:{vehicleId:"",id:"",type:""},checkFlag:!1,searchFlag:!0,crrentSubV:[],zTreeIdJson:{},ztreeContainer:"amassMessageTree",treeUrl:"/clbs/m/basicinfo/monitoring/vehicle/treeStateInfos",monitorSize:340025,searchTimeout:void 0,vehicleIds:[],amassRefreshTask:null,amassSendFlag:!0,amassVids:"",amassTableData:[],amassTableContainer:"amassMessageTable",amassTableObject:null,amassSendUrl:"/clbs/v/monitoring/sendTextByBatch",amassListUrl:"/clbs/v/monitoring/getSendTextStatusList",vehicleData:[],quickPage:0,quickDataSize:0,quickDataPage:0,quickActiveId:"",quickActiveIndex:null,quickTableData:[],quickTableContainer:"quickMessageTable",quickTableObject:null,quickTableEditUrl:"/clbs/lkyw/message/template/updateTemplate",quickTableAddUrl:"/clbs/lkyw/message/template/addTemplate",quickTableListUrl:"/clbs/lkyw/message/template/templateList",quickTableDeleteUrl:"/clbs/lkyw/message/template/deleteTemplate",reportData:null}},this.state.$origin=$(e.selector),this.initHtml()},e.prototype.initHtml=function(){var e=$(o.a),t=document.body.clientWidth;t>860&&(this.state.data.viewWidth=.8*t),this.state.$origin.empty(),this.state.$origin.append(e),this.initElement(e)},e.prototype.initElement=function(e){this.state.$dom.$amassDrawer=e.find("#amassDrawer"),this.state.$dom.$amassMessageInput=e.find("#amassMessageInput"),this.state.$dom.$amassMessageType=e.find("#amassMessageType"),this.state.$dom.$conmunicationType=e.find("#conmunicationType"),this.state.$dom.$amassMessageForm=e.find("#amassMessageForm"),this.state.$dom.$textType=e.find("#textType"),this.state.$dom.$amass19=e.find("#amass19"),this.state.$dom.$amass13=e.find("#amass13"),this.state.$dom.$amassBtn=e.find("#amassBtn"),this.state.$dom.$quickMessages=e.find("#quickMessages"),this.state.$dom.$quickTableClose=e.find("#quickTableClose"),this.state.$dom.$quickMessageBtn=e.find("#quickMessageBtn"),this.state.$dom.$quickTableQuery=e.find("#quickTableQuery"),this.state.$dom.$quickTableSearch=e.find("#quickTableSearch"),this.state.$dom.$quickMessageTbody=e.find("#quickMessageTbody"),this.state.$dom.$quickTotal=e.find("#total"),this.state.$dom.$quickModal=e.find("#editQuickModal"),this.state.$dom.$deviceTypeVal=e.find("#deviceTypeVal"),this.state.$dom.$vehicleType=e.find("#vehicleType"),layer.load(2),this.initVehicles(),this.bindEvent(),this.updateDifferenceForm()},e.prototype.bindEvent=function(){var e=this,t=this.dependency.get("layout");this.state.$origin.find(".drawerCloseBtn").on("click",(function(){t.back()})),this.state.$origin.find("input").inputClear(),this.state.$dom.$amassBtn.bind("click",this.amassMessageEvent.bind(this)),this.state.$dom.$quickTableClose.bind("click",(function(){e.state.data.quickPage=0,e.state.data.quickDataSize=0,e.state.data.quickDataPage=0,e.state.data.quickTableData=[],e.state.data.quickTableObject.clear(),e.state.$origin.find("#quickMessageTbody").html(""),e.state.$origin.find("#amassDrawer").removeClass("active")})),this.state.$dom.$quickMessageBtn.bind("click",(function(){if(e.state.$origin.find("#amassDrawer").hasClass("active"))return!1;e.state.$origin.find("#amassDrawer").addClass("active"),e.state.data.quickPage=0,e.state.data.quickDataSize=0,e.state.data.quickDataPage=0,e.state.data.quickTableData=[],e.state.data.quickTableObject.clear(),e.getQuickData()}));var a=this.state.$dom.$quickMessages;$("body").on("dblclick","#quickMessageTbody td:nth-child(2)",(function(t){var a=t.target,s=$(a).text();e.state.$origin.find("#amassMessageTextarea").val(s)})),this.state.$origin.find("#editQuickModal").bind("show.bs.modal",(function(t){var a=t.relatedTarget;e.initQuickModal(a)})),a.off().on("click",".deleteBtn",(function(t){var a=$(t.currentTarget).attr("data-id");layer.confirm("您确定要删除此条详细内容吗？",{title:"操作确认",icon:3,btn:["确定","取消"]},(function(){e.deleteQuickData(a)}))})),this.state.$origin.off().on("click","#saveQuickData",this.saveQuickData.bind(this)),this.state.$origin.on("click","#quickFormDelete",(function(){e.state.$origin.find("#editQuickTextarea").val("").focus()})),a.scroll((function(t){var s=a.prop("scrollTop");if(a.prop("scrollHeight")-s<=a.prop("clientHeight")){if(e.state.data.quickDataPage==e.state.data.quickPage)return layer.msg("没有更多了"),!1;e.getQuickData()}})),this.state.$dom.$conmunicationType.bind("change",(function(t){e.state.data.selectedMonitor={vehicleId:"",id:"",type:""},e.updateDifferenceForm()})),this.state.$dom.$amassMessageType.bind("change",(function(t){var a=$(t.target).val();e.state.$dom.$amassMessageInput.val(""),e.state.data.selectedMonitor={selector:"",vehicleId:"",id:"",name:"",type:""},e.updateAmassTreeType(a+"")})),this.state.$dom.$vehicleType.bind("change",this.searchVehicleTree.bind(this)),this.state.$dom.$amassMessageInput.inputClear().on("onClearEvent",this.searchVehicleTree.bind(this));var s=null;this.state.$dom.$amassMessageInput.bind("input propertychange",(function(t){e.state.data.selectedMonitor={selector:"",vehicleId:"",id:"",name:"",type:""},void 0!==s&&clearTimeout(s),window.ActiveXObject||"ActiveXObject"in window||(e.state.data.searchFlag=!0),s=setTimeout((function(){e.state.data.searchFlag&&e.searchVehicleTree(),e.state.data.searchFlag=!0}),500)})),this.initAmassTable(),this.initQuickTable()},e.prototype.destory=function(){this.state.$origin.empty()},e.prototype.initVehicles=function(){return g(this,void 0,void 0,(function(){var e,t;return y(this,(function(a){switch(a.label){case 0:return"/clbs/m/reportManagement/vehGeneralInfo/getVehTypes",[4,s.a.post("/clbs/m/reportManagement/vehGeneralInfo/getVehTypes",null)];case 1:return(e=a.sent()).data&&(this.state.data.vehicleData=e.data,t="",e.data.forEach((function(e){t+='<option value="'+e.type+'" data-id="'+e.id+'">'+e.type+"</option>"})),this.state.$dom.$vehicleType.html(t)),[2]}}))}))},e.prototype.updateAmassTreeType=function(e){"vehType"==e?(this.state.$dom.$vehicleType.show(),this.state.$dom.$amassMessageInput.hide(),this.searchVehicleTree()):(this.state.$dom.$vehicleType.hide(),this.state.$dom.$amassMessageInput.show(),this.initTree())},e.prototype.updateDifferenceForm=function(){var e=this.state.data.selectedMonitor,t="13";e.type&&(t=11==e.type||20==e.type||21==e.type||24==e.type||25==e.type||26==e.type||28==e.type?"19":"13",this.state.$dom.$conmunicationType.val(t));var a={conmunicationType:e.type?t:this.state.$dom.$conmunicationType.val()},s=c()(a),i=u()(a),n=h()(a);this.state.$dom.$textType.html(s),this.state.$dom.$amass19.html(i),this.state.$dom.$amass13.html(n),this.searchVehicleTree()},e.prototype.initTree=function(){this.dependency.get("data");var e=this.state.data.selectedMonitor;this.state.$origin.find("#treeLoad").show(),this.state.$origin.find("#treeEmpty").hide();var t="19"==this.state.$dom.$conmunicationType.val()?11:1,a=this.state.$dom.$amassMessageType.val(),s={queryParam:this.state.$dom.$amassMessageInput.val(),devType:t,queryType:e.vehicleId?"rightClick":a},i={async:{url:this.getTreeUrl.bind(this),type:"post",enable:!0,autoParam:["id"],dataType:"json",otherParam:s,dataFilter:this.ajaxTreeDataFilter.bind(this)},check:{enable:!0,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"},radioType:"all"},view:{dblClickExpand:!1,nameIsHTML:!0,countClass:"group-number-statistics"},data:{simpleData:{enable:!0}},callback:{beforeClick:this.beforeClickVehicle.bind(this),onAsyncSuccess:this.zTreeOnAsyncSuccess.bind(this),beforeCheck:this.zTreeBeforeCheck.bind(this),onCheck:this.onCheckVehicle.bind(this),onExpand:this.zTreeOnExpand.bind(this),onNodeCreated:this.zTreeOnNodeCreated.bind(this)}};$.fn.zTree.init($("#"+this.state.data.ztreeContainer),i,null)},e.prototype.searchVehicleTree=function(e){this.state.data.crrentSubV=[],this.state.$origin.find("#treeLoad").show(),this.state.$origin.find("#treeEmpty").hide();var t="";e&&(t=$(e.target).val()+"",this.state.data.selectedMonitor={selector:"",vehicleId:"",id:"",name:"",type:""});var a=this.state.$dom.$amassMessageInput.val(),s="19"==this.state.$dom.$conmunicationType.val()?11:1,i=this.state.$dom.$amassMessageType.val(),n=t||a;if("vehType"==i&&(n=this.state.$dom.$vehicleType.val()),null==n||null==n||""==n)this.initTree();else{var r={async:{url:this.getTreeUrl.bind(this),type:"post",enable:!0,autoParam:["id"],dataType:"json",otherParam:{devType:s,queryParam:n,queryType:i},dataFilter:this.ajaxTreeDataFilter.bind(this)},check:{enable:!0,chkStyle:"checkbox",radioType:"all",chkboxType:{Y:"s",N:"s"}},view:{dblClickExpand:!1,nameIsHTML:!0,countClass:"group-number-statistics"},data:{simpleData:{enable:!0}},callback:{beforeClick:this.beforeClickVehicle.bind(this),onCheck:this.onCheckVehicle.bind(this),onExpand:this.zTreeOnExpand.bind(this),onNodeCreated:this.zTreeOnNodeCreated.bind(this)}};$.fn.zTree.init($("#"+this.state.data.ztreeContainer),r,null)}},e.prototype.getTreeUrl=function(e,t){if(null==t)return"/clbs/m/personalized/ico/monitorTree";if("assignment"==t.type){var a="13"==this.state.$dom.$conmunicationType.val()?1:11;return"/clbs/m/functionconfig/fence/bindfence/putMonitorByAssign?assignmentId="+t.id+"&isChecked="+t.checked+"&monitorType=allMonitor&deviceType="+a+"&webType=10"}},e.prototype.ajaxTreeDataFilter=function(e,t,a){this.state.$dom.$amassMessageType.val(),$.fn.zTree.getZTreeObj(e);var s,n=this.state.data.selectedMonitor;if(a.msg){var r=JSON.parse(Object(i.a)(a.msg)),o=0;null!=r.tree&&null!=r.tree?(s=r.tree,this.state.data.monitorSize=r.size):s=r,"monitor"==$("#amassMessageType").val()&&r.size<5e3&&(s=filterQueryResult(s,[]));for(var l=0;l<s.length;l++)s[l].open=!0,s[l].id==n.vehicleId&&(this.state.$dom.$amassMessageInput.val(n.name),o++,s[l].checked=!0);n.vehicleId&&0==o&&layer.msg("该监控对象不支持"),this.state.$origin.find("#treeEmpty").hide()}else this.state.$origin.find("#treeEmpty").show();return this.state.$origin.find("#treeLoad").hide(),s},e.prototype.zTreeOnNodeCreated=function(e,t,a){var s=a.id.toString(),i=[];null==this.state.data.zTreeIdJson[s]||null==this.state.data.zTreeIdJson[s]?(i=[a.tId],this.state.data.zTreeIdJson[s]=i):this.state.data.zTreeIdJson[s].push(a.tId)},e.prototype.beforeClickVehicle=function(e,t){return $.fn.zTree.getZTreeObj(e).checkNode(t,!t.checked,!0,!0),!1},e.prototype.zTreeOnAsyncSuccess=function(e,t,a,s){var i=$.fn.zTree.getZTreeObj(t),n=(i.getNodes(),this.state.data.selectedMonitor),r=i.getNodesByParam("id",n.vehicleId,null);this.state.$origin.find("#treeLoad").hide(),!n.vehicleId&&this.state.data.monitorSize<=5e3&&i.checkAllNodes(!0),r.length&&i.selectNode(r[0]),layer.closeAll("loading"),this.getCharSelect(i)},e.prototype.zTreeBeforeCheck=function(e,t){var a=!0;if(!t.checked){layer.load(2);var s=$.fn.zTree.getZTreeObj(e),i=s.getCheckedNodes(!0),n=[],r=void 0,o=0,l={parentId:t.id,type:t.type};if("group"==t.type||"assignment"==t.type){json_ajax("post","/clbs/m/personalized/ico/getCheckedVehicle","json",!1,l,(function(e){e.success?o+=e.obj:layer.msg(e.msg)}));for(var c=0;c<i.length;c++){if(r=i[c].id,"people"==i[c].type||"vehicle"==i[c].type)null==s.getNodeByParam("tId",i[c].tId,t)&&-1==$.inArray(r,n)&&n.push(r)}o+=n.length}else if("people"==t.type||"vehicle"==t.type){for(c=0;c<i.length;c++)r=i[c].id,"people"!=i[c].type&&"vehicle"!=i[c].type||-1==$.inArray(r,n)&&n.push(r);o=n.length+1}layer.closeAll("loading"),o>2e3&&(layer.msg("勾选数量上限为2000"),a=!1)}return a&&("group"!=t.type||t.checked||(this.state.data.checkFlag=!0)),a},e.prototype.onCheckVehicle=function(e,t,a){var s=$.fn.zTree.getZTreeObj(t);a.checked&&(this.state.data.searchFlag=!1,s.expandNode(a,!0,!0,!0,!0)),this.getCharSelect(s),this.getCheckedNodes()},e.prototype.unique=function(e){for(var t={},a=[],s=0;s<e.length;s++){var i=e[s],n=typeof i;t[i]?t[i].indexOf(n)<0&&(t[i].push(n),a.push(i)):(t[i]=[n],a.push(i))}return a},e.prototype.zTreeOnExpand=function(e,t,a){var s=this;if("group"!=a.type||this.state.data.checkFlag){this.state.data.checkFlag=!1;var i=$.fn.zTree.getZTreeObj(t);if("group"==a.type){var n="19"==this.state.$dom.$conmunicationType.val()?11:1;json_ajax("post","/clbs/lkyw/v/monitoring/putMonitorByGroup","json",!1,{groupId:a.id,isChecked:a.checked,monitorType:"vehicle",deviceType:n},(function(e){var t=e.obj;null!=t&&null!=t&&$.each(t,(function(e){var a=e,n=t[e];if(null!=s.state.data.zTreeIdJson[a]){var r=s.state.data.zTreeIdJson[a][0],o=i.getNodeByTId(r);void 0===o.children&&(o.zAsync=!0,i.addNodes(o,0,n))}}))}))}}},e.prototype.getCharSelect=function(e){var t=e.getCheckedNodes(!0);e.getNodes();t.length>0&&t[0].name},e.prototype.getCheckedNodes=function(){for(var e=$.fn.zTree.getZTreeObj(this.state.data.ztreeContainer).getCheckedNodes(!0),t=[],a={},s=0,i=e.length;s<i;s++)"vehicle"!=e[s].type&&"people"!=e[s].type&&"thing"!=e[s].type||(t.push(e[s].id),a[e[s].id]=e[s]);var n=this.unique(t).join(",");return this.state.data.vehicleIds=n,n},e.prototype.initAmassTable=function(){var e=this.state.data.amassTableContainer,t=[{data:"plateNumber"},{data:"status",render:this.getStatus.bind(this)}];this.state.data.amassTableObject=$("#"+e).DataTable({destroy:!0,lengthChange:!0,bPaginate:!0,bFilter:!1,searching:!0,ordering:!1,Info:!0,autoWidth:!0,stripeClasses:[],lengthMenu:"",pageLength:20,pagingType:"simple_numbers",dom:"t<'row'<'col-xs-12 hasMargin'p>>",oLanguage:{oAria:{sSortAscending:" - click/return to sort ascending",sSortDescending:" - click/return to sort descending"},sLengthMenu:"显示 _MENU_ 记录",sInfo:"当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录。",sZeroRecords:"无数据",sEmptyTable:"无数据",sLoadingRecords:"正在加载数据-请等待...",sInfoEmpty:"",sInfoFiltered:"（数据库中共为 _MAX_ 条记录）",sProcessing:"<img src='../resources/user_share/row_details/select2-spinner.gif'/> 正在加载数据...",sSearch:"模糊查询：",sUrl:"",oPaginate:{sFirst:"",sPrevious:" 上一页 ",sNext:" 下一页 ",sLast:""}},columns:t,columnDefs:[{targets:[0],searchable:!1}],order:[[0,null]]})},e.prototype.reloadData=function(e){var t=this.state.data.amassTableObject,a=t.page();t.clear(),t.rows.add(e),t.page(a).draw(!1)},e.prototype.getStatus=function(e,t,a,s){var i="";switch(e){case 0:i="参数已生效";break;case 1:i="参数未生效";break;case 2:i="参数消息有误";break;case 3:i="参数不支持";break;case 4:i="参数下发中";break;case 5:i="终端离线，未下发";break;case 7:i="终端处理中";break;case 8:i="终端接收失败";break;default:i=""}return i},e.prototype.amassValidate=function(){return this.state.$dom.$amassMessageForm.validate({rules:{amassMessageTextarea:{required:!0,maxlength:512}},messages:{amassMessageTextarea:{required:"请输入需要下发的文本内容",maxlength:"最多输入512个字符"}}}).form()},e.prototype.getAmass13Marks=function(e){var t=[];return e.forEach((function(e){"marks"==e.name&&t.push(e.value)})),t.join(",")},e.prototype.amassMessageEvent=function(){return g(this,void 0,void 0,(function(){var e,t,a,i,n,r,o,l;return y(this,(function(c){switch(c.label){case 0:return this.getCheckedNodes(),e=this.state.$dom.$amassMessageForm,t=this.state.$dom.$amassBtn,a=this.state.$dom.$conmunicationType.val(),i=19==a?"/clbs/v/monitoring/sendTextByBatch2019":this.state.data.amassSendUrl,n=this.state.data.vehicleIds,r=e.serializeArray(),(o=new FormData).append("sendTextContent",this.getSerializeData(r,"amassMessageTextarea")),13==a?o.append("marks",this.getAmass13Marks(r)):(o.append("deviceType","11"),o.append("messageTypeOne",this.getSerializeData(r,"messageTypeOne")),o.append("messageTypeTwo",this.getSerializeData(r,"messageTypeTwo")),o.append("terminalDisplay",this.getSerializeData(r,"displayMarks")?"1":"0"),o.append("terminalTtsPlay",this.getSerializeData(r,"ttsMarks")?"1":"0"),o.append("textType",this.getSerializeData(r,"textType"))),this.amassValidate()?(n.split(","),""===n||null==n||void 0===n?(layer.msg("请勾选监控对象"),[2]):(this.state.data.amassVids=n,this.reloadAmassData([]),o.append("vehicleIds",n),t.attr("disabled","disabled"),layer.load(2),[4,s.a.post(i,o)])):[2];case 1:return(l=c.sent()).data.success?(this.sendSocket(),layer.closeAll("loading"),layer.msg("下发成功"),t.removeAttr("disabled")):(l.data.msg?layer.msg(l.data.msg):layer.msg("下发失败"),t.removeAttr("disabled"),layer.closeAll("loading")),[2]}}))}))},e.prototype.sendSocket=function(){var e=this;e.getAmassData();var t=e.state.data.amassRefreshTask,a=e.state.data.amassSendFlag,s=e.dependency.get("data");if(a){var i=Object(n.a)({access_token:s.get("access_token")}),r={access_token:s.get("access_token")};i.unsubscribe("/user/topic/send_txt"),i.subscribe(r,"/user/topic/send_txt",(function(a){null!=t&&void 0!==t&&clearTimeout(t),t=setTimeout((function(){console.log("socket",e),e.getAmassData()}),2e3)}),"",null),e.state.data.amassSendFlag=!1}},e.prototype.getAmassData=function(){return g(this,void 0,void 0,(function(){var e,t,a,i;return y(this,(function(n){switch(n.label){case 0:return layer.load(2),this.state.$dom.$amassBtn.attr("disabled"," disabled"),e=new FormData,(t=this.state.data.amassVids).length?(e.append("vehicleIds",t),[4,s.a.post(this.state.data.amassListUrl,e)]):(layer.closeAll("loading"),[2,!1]);case 1:return(a=n.sent()).data.success?(i=a.data.obj,this.state.data.amassTableData=i,this.reloadAmassData(i),this.state.$dom.$amassBtn.removeAttr("disabled"),this.state.$origin.find("#amassMessageTextarea").val(""),layer.closeAll("loading")):a.data.msg&&(layer.msg(a.data.msg),layer.closeAll("loading")),[2]}}))}))},e.prototype.reloadAmassData=function(e){var t=this.state.data.amassTableObject,a=t.page();t.clear(),t.rows.add(e),t.page(a).draw(!1)},e.prototype.initQuickTable=function(){var e=this,t=this.state.data,a="#"+t.quickTableContainer,s=[{data:""},{data:"content",render:function(e,t,a,s){return html2Escape(a.content,!1)}},{data:"",render:function(e,t,a,s){var i=html2Escape(a.content,!1);return'<a data-toggle="modal" data-id="'+a.id+'" data-content="'+i+'" data-target="#editQuickModal" type="button" class="editBtn" title="修改" style="color: #6dcff6;">修改</a><a data-id="'+a.id+'" type="button" class="deleteBtn" title="删除" style="color: #6dcff6;">删除</a>'}}];t.quickTableObject=$(a).DataTable({columns:s,columnDefs:[{targets:[0,2],searchable:!1}],destroy:!0,lengthChange:!1,bPaginate:!1,bFilter:!1,searching:!0,ordering:!1,Info:!1,autoWidth:!0,stripeClasses:[],pageLength:5,paging:!1,lengthMenu:[],pagingType:"simple_numbers",dom:"t",oLanguage:{oAria:{sSortAscending:" - click/return to sort ascending",sSortDescending:" - click/return to sort descending"},sLengthMenu:"显示 _MENU_ 记录",sInfo:"当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录。",sZeroRecords:"我本将心向明月，奈何明月照沟渠，不行您再用其他方式查一下？",sEmptyTable:"我本将心向明月，奈何明月照沟渠，不行您再用其他方式查一下？",sLoadingRecords:"正在加载数据-请等待...",sInfoEmpty:"当前显示0到0条，共0条记录",sInfoFiltered:"（数据库中共为 _MAX_ 条记录）",sProcessing:"<img src='../resources/user_share/row_details/select2-spinner.gif'/> 正在加载数据...",sSearch:"模糊查询：",sUrl:"",oPaginate:{sFirst:"首页",sPrevious:" 上一页 ",sNext:" 下一页 ",sLast:" 尾页 "}},order:[[0,null]]}),t.quickTableObject.on("order.dt search.dt",(function(){t.quickTableObject.column(0,{search:"applied",order:"applied"}).nodes().each((function(e,t){e.innerHTML=t+1}))})).draw(),this.state.$dom.$quickTableQuery.keyup((function(t){13==t.keyCode&&e.state.$dom.$quickTableSearch.click()})),this.state.$dom.$quickTableSearch.bind("click",(function(){e.state.data.quickPage=0,e.state.data.quickDataSize=0,e.state.data.quickDataPage=0,e.state.data.quickTableData=[],e.state.data.quickTableObject.clear(),e.state.$origin.find("#quickMessageTbody").html(""),e.getQuickData()})),this.setQuickTotal()},e.prototype.getQuickData=function(){return g(this,void 0,void 0,(function(){var e,t,a,i,n,r,o,l,c,d;return y(this,(function(u){switch(u.label){case 0:return layer.load(2),e=this.state.data.quickPage,t=this.state.data.quickTableListUrl,a=this.state.$dom.$quickTableQuery.val(),i=20*e,(n=new FormData).append("simpleQueryParam",a+""),n.append("start",i+""),n.append("length","20"),n.append("status","1"),[4,s.a.post(t,n)];case 1:return(r=u.sent()).data.success?(o=r.data,this.state.data.quickDataSize=o.totalRecords,this.state.data.quickPage=o.page,this.state.data.quickDataPage=o.totalPages,l=this.state.data.quickTableData,c=l.concat(o.records),this.state.data.quickTableData=c,this.reloadQuickTable(c),this.setQuickTotal(),d=setTimeout((function(){layer.closeAll(),clearTimeout(d)}),2e3)):r.data.msg&&layer.msg(r.data.msg),[2]}}))}))},e.prototype.getAddQuickItem=function(){return g(this,void 0,void 0,(function(){var e,t,a,i,n,r,o,l;return y(this,(function(c){switch(c.label){case 0:return e=this.state.data.quickTableData,t=this.state.data.quickDataSize+1,a=Math.ceil(t/20),i=this.state.data.quickTableListUrl,n=new FormData,r=this.state.$dom.$quickTableQuery.val(),n.append("simpleQueryParam",r),n.append("start",10*a+""),n.append("length","20"),n.append("status","1"),[4,s.a.post(i,n)];case 1:return(o=c.sent()).data.success?(this.state.$dom.$quickMessages.scrollTop(0),this.state.data.quickDataSize==e.length&&(l=o.data.records[o.data.records.length-1],e.push(l),this.reloadQuickTable(e)),this.state.data.quickDataSize=this.state.data.quickDataSize+1,this.setQuickTotal()):o.data.msg&&layer.msg(o.data.msg),[2]}}))}))},e.prototype.setQuickTotal=function(){var e=this.state.data.quickDataSize;this.state.$dom.$quickTotal.text("合计"+e+"条记录")},e.prototype.reloadQuickTable=function(e,t){var a=this.state.data.quickTableObject,s=a.page();a.clear(),a.rows.add(e),a.page(s).draw(!1)},e.prototype.initQuickModal=function(e){var t=$(e),a=t.attr("title"),s=t.attr("data-id"),i=this.state.data.quickTableData,n=(this.state.$origin.find("#editQuickModal"),i.findIndex((function(e){return e.id==s}))),r={type:a,content:s?i[n].content:""},o=b()(r);this.state.data.quickActiveId=s,this.state.data.quickActiveIndex=n,this.state.$origin.find("#saveQuickData").removeAttr("disabled"),this.state.$origin.find("#editQuickModal").html(o)},e.prototype.quickValidate=function(){return $("#quickForm").validate({rules:{editQuickTextarea:{required:!0,maxlength:79}},messages:{editQuickTextarea:{required:"请输入需要下发的短信内容",maxlength:"最多输入79个字符"}}}).form()},e.prototype.deleteQuickData=function(e){return g(this,void 0,void 0,(function(){var t,a,i,n;return y(this,(function(r){switch(r.label){case 0:return layer.load(2),t=this.state.data.quickTableDeleteUrl,(a=new FormData).set("ids",e),i=this.state.data.quickTableData,i.findIndex((function(t){return t.id==e})),[4,s.a.post(t,a)];case 1:return(n=r.sent()).data.success?(layer.closeAll("loading"),layer.msg("删除成功"),this.state.data.quickPage=0,this.state.data.quickDataSize=0,this.state.data.quickDataPage=0,this.state.data.quickTableData=[],this.state.data.quickTableObject.clear(),this.state.$origin.find("#quickMessageTbody").html(""),this.getQuickData(),[2,!1]):(n.data.msg&&layer.msg(n.data.msg),[2])}}))}))},e.prototype.saveQuickData=function(){return g(this,void 0,void 0,(function(){var e,t,a,i,n,r,o,l,c,d;return y(this,(function(u){switch(u.label){case 0:return e=this.state.data.quickTableData,t=this.state.data.quickActiveId,a=this.state.data.quickActiveIndex,i=this.state.$origin.find("#editQuickTextarea").val(),n="add",i=i||"",/[`~@#$%^&*()_\-+=<>{}|\/'\\[\]·~@#￥%……&*（）——\-+={}|《》“”【】‘'、]/im,this.quickValidate()?(r=t?e[a].remark:"",o=this.state.data.quickTableAddUrl,l={},c=new FormData,t&&(c.append("id",t),o=this.state.data.quickTableEditUrl,l.id=t,n="edit"),l.content=i,l.status=1,l.remark=r,c.append("content",i+""),c.append("status","1"),c.append("remark",r),[4,s.a.post(o,c)]):[2,!1];case 1:return(d=u.sent()).data.success?(this.state.$origin.find("#saveQuickData").attr("disabled","disabled"),layer.msg("保存成功"),"edit"==n?(e[a].content=i,this.state.data.quickTableObject.clear(),this.reloadQuickTable(e)):(this.state.data.quickPage=0,this.state.data.quickDataSize=0,this.state.data.quickDataPage=0,this.state.data.quickTableData=[],this.state.data.quickTableObject.clear(),this.state.$origin.find("#quickMessageTbody").html(""),this.getQuickData()),this.state.$origin.find("#editQuickModal").modal("hide")):d.data.msg?layer.msg(d.data.msg):layer.msg("添加失败"),[2]}}))}))},e.prototype.getSerializeData=function(e,t){var a="";return e.forEach((function(e){e.name==t&&(a=e.value)})),a},e}();t.default=f}}]);