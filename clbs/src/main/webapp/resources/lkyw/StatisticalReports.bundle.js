(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{247:function(t,n){t.exports='<div class="modal statisticalReports" id="statisticalReports" tabindex="-1" role="dialog" style="display: block;"\r\n    data-backdrop="static">\r\n    <div class="modal-dialog modal-lg" style="margin-top: 50px;">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n                <h4 class="modal-title">统计报表</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="report-container"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},248:function(module,exports){module.exports=function anonymous(locals,filters,escape,rethrow){escape=escape||function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<div class="report-container">\r\n    <% data.forEach(function(report){ %>\r\n    <div class="report-item">\r\n        <div class="report-classify"><%- report.name %></div>\r\n        <ul class="report-list">\r\n            <% report.list.forEach(function(item){ %>\r\n            <li class="report-title"><a href="/clbs<%- item.url %>" target="_blank"><%- item.name %></a></li>\r\n            <% }); %>\r\n        </ul>\r\n    </div>\r\n    <% }); %>\r\n</div>',filename:"."};function rethrow(t,n,e,r){var a=n.split("\n"),i=Math.max(r-3,0),o=Math.min(a.length,r+3),s=a.slice(i,o).map((function(t,n){var e=n+i+1;return(e==r?" >> ":"    ")+e+"| "+t})).join("\n");throw t.path=e,t.message=(e||"ejs")+":"+r+"\n"+s+"\n\n"+t.message,t}try{var buf=[];with(locals||{})buf.push('<div class="report-container">\n    '),__stack.lineno=2,data.forEach((function(t){buf.push('\n    <div class="report-item">\n        <div class="report-classify">',(__stack.lineno=4,t.name),'</div>\n        <ul class="report-list">\n            '),__stack.lineno=6,t.list.forEach((function(t){buf.push('\n            <li class="report-title"><a href="/clbs',(__stack.lineno=7,t.url),'" target="_blank">',(__stack.lineno=7,t.name),"</a></li>\n            "),__stack.lineno=8})),buf.push("\n        </ul>\n    </div>\n    "),__stack.lineno=11})),buf.push("\n</div>");return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}}},249:function(t,n,e){},254:function(t,n,e){"use strict";e.r(n);var r=e(7),a=e(247),i=e.n(a),o=e(248),s=e.n(o),l=(e(249),function(t,n,e,r){return new(e||(e=Promise))((function(a,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function s(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(o,s)}l((r=r.apply(t,n||[])).next())}))}),c=function(t,n){var e,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(t,o)}catch(t){i=[6,t],r=0}finally{e=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=function(){function t(t,n){this.setOption(t)}return t.prototype.setOption=function(t){this.option=t,this.state={$origin:null,$dom:{$reportContainer:null},data:{reportData:null,reportUrl:"/clbs/lkyw/v/monitoring/getUerReportMenu"}},this.state.$origin=$(t.selector),this.initHtml(),this.bindEvent()},t.prototype.initHtml=function(){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return t=$(i.a),this.state.$origin.empty(),this.state.$origin.append(t),this.state.$dom.$reportContainer=t.find(".report-container"),[4,this.getReportData()];case 1:return n.sent(),$("#statisticalReports").modal("show").on("hidden.bs.modal",this.destory.bind(this)),[2]}}))}))},t.prototype.bindEvent=function(){},t.prototype.destory=function(){this.state.$origin.empty()},t.prototype.computedName=function(t){var n="";switch(t){case"SERVICE_REPORT":n="服务类报表";break;case"POSITIONAL_REPORT":n="位置报表";break;case"OTHER_REPORT":n="其他报表";break;case"ALARM_REPORT":n="报警报表";break;case"MEDIA_REPORT":n="多媒体报表"}return n},t.prototype.initReportHtml=function(){var t=s()({data:this.state.data.reportData});this.state.$dom.$reportContainer.html(t)},t.prototype.getReportData=function(){return l(this,void 0,void 0,(function(){var t,n,e;return c(this,(function(a){switch(a.label){case 0:return layer.load(2),[4,r.a.post(this.state.data.reportUrl,null)];case 1:return(t=a.sent()).data.success?(n=t.data.obj,e=[{name:"服务类报表",list:n.SERVICE_REPORT},{name:"报警类报表",list:n.ALARM_REPORT},{name:"多媒体报表",list:n.MEDIA_REPORT},{name:"位置报表",list:n.POSITIONAL_REPORT},{name:"其他报表",list:n.OTHER_REPORT}],this.state.data.reportData=e,this.initReportHtml()):t.data.msg?layer.msg(t.data.msg):layer.msg("获取失败"),layer.closeAll("loading"),[2]}}))}))},t}();n.default=u}}]);