<!DOCTYPE html>
<html class="no-js" xmlns:th="http://www.thymeleaf.org">
<head>
<title>资源管理</title>
<div th:replace="fragments/header">header</div>
</head>
<body>
	<section id="container">
		<div th:replace="fragments/nav">nav</div>
		<div th:replace="fragments/menu">menu</div>
		<!--main content start-->
		<section class="main-content-wrapper">
			<section id="main-content">
				<div class="row">
					<div class="col-md-12">
						<!--breadcrumbs start -->
						<ul class="breadcrumb">
							<li><a href="#">主页</a></li>
							<li>基础信息</li>
							<li class="active">企业管理</li>
							<li class="active">资源管理</li>
						</ul>
						<!--breadcrumbs end -->
						<h1 class="h1 ">终端手机号管理</h1>
					</div>
				</div>

				<div class="row">
					<div class="col-md-12">
						<div class="panel panel-default">
							<div class="panel-heading">
								<h3 class="panel-title fwb">资源列表</h3>
								<div class="actions pull-right">
									<i class="fa fa-chevron-down"></i> <i class="fa fa-times"></i>
								</div>
							</div>
							<div class="panel-body fixed-table-body">
								    <!--工具面板-->
                    <div class="ToolPanel">
                        <div class="bars pull-left">
                            <div class="btn-group pull-left barsMargin" role="group">
                                <form role="form">
                                   <label><input type="text" class="Inlinesearch form-control" id="simpleQueryParam" name="simpleQueryParam" placeholder="请输入关键字"></label>
                                   <button type="button" onclick="myTable.filter()" class="btn btn-outline btn-default">搜索</button>
                                </form>
                            </div>
                            <div class="dropdown pull-left">
                                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">操作菜单<span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                    <li><a th:href="@{/c/resource/add}" id="addId" data-toggle="modal" data-target="#commonWin"><i class="glyphicon glyphicon-plus icoPaddingLeft"></i>新增</a></li>
                                    <li><a th:href="@{/m/basicinfo/equipment/simcard/export}" id="exportId"><i class="glyphicon glyphicon-log-out icoPaddingLeft"></i>导出</a></li>
                                    <li><a href="#" id="del_model"><i class="glyphicon glyphicon-trash icoPaddingLeft"></i>批量删除</a></li>
                                    <li><a th:href="@{/m/basicinfo/equipment/simcard/import}" id="importId" data-toggle="modal" data-target="#commonWin"><i class="glyphicon glyphicon-save icoPaddingLeft"></i>导入组织架构图</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="columns btn-group pull-right">
                            <button class="btn btn-default" type="button" name="refresh" title="Refresh">
                                <i class="glyphicon glyphicon-refresh icon-refresh"></i>
                            </button>
                            <div class="keep-open btn-group" title="Columns">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                    <i class="glyphicon glyphicon-th icon-th"></i> <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu" id="Ul-menu-text">                
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!--工具面板 end-->
										<!-- <div class="domab">
											<label><input type="text"
												class="dsearch form-control" placeholder="请输入关键字"
												id="simpleQueryParam" aria-controls="example"></label>
											<button onclick="myTable.filter()"
												class="btn btn-default btn-trans">搜索</button>
											<button class="showUl btn btn-default btn-trans">高级查看</button>
											<ul class="showUlField dropdown-menu" style="display: none;">
												<li><input type="checkbox" class="toggle-vis"
													data-column="1" />操作设置</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="2" />名称</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="3" />资源类型</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="4" />权限代码</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="5" />权限标识</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="6" />描述</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="7" />优先级</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="8" />是否可编辑</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="9" />是否可用</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="10" />创建人</li>
												<li><input type="checkbox" class="toggle-vis"
													data-column="11" />创建时间</li>
											</ul>
											<span class="dropdown">
												<button class="btn btn-default dropdown-toggle"
													type="button" id="dropdownMenu1" data-toggle="dropdown"
													aria-haspopup="true" aria-expanded="true">
													操作菜单 <span class="caret"></span>
												</button>
												<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
													<li><a th:href="@{/c/resource/add}" id="addId" data-toggle="modal" data-target="#commonWin">新增</a></li>
													<li><a th:href="@{/m/basicinfo/equipment/simcard/export}" id="exportId">导出</a></li>
													<li><a href="#" id="del_model">批量删除</a></li>
													<li><a th:href="@{/m/basicinfo/equipment/simcard/import}" id="importId"
														data-toggle="modal" data-target="#commonWin">导入组织架构图</a></li>
												</ul>
											</span>
										</div> -->
										<table id="dataTable"
											class="table table-striped table-bordered table-hover"
											cellspacing="0" width="100%">
											<thead>
												<tr>
													<th style="width: 1px; padding: 0"></th>
													<th style="width: 30px; padding: 10px"><input
														type="checkbox" id="checkAll"></th>
													<th>操作设置</th>
													<th>名称</th>
													<th>资源类型</th>
													<th>权限代码</th>
													<th>权限标识</th>
													<th>描述</th>
													<th>优先级</th>
													<th>是否可编辑</th>
													<th>是否可用</th>
													<th>创建人</th>
													<th>创建时间</th>
												</tr>
											</thead>
											
										</table>
									
							</div>
						</div>
					</div>
				</div>
			</section>
		</section>
		<!--main content end-->

	</section>
	<div th:replace="fragments/footer">footer</div>
</body>

<!--/***** 当前页js end *****/-->
<script th:inline="javascript">
//显示隐藏列
    var menu_text = "";
    var table = $("#dataTable tr th:gt(1)");
    for(var i = 0; i < table.length; i++){
        menu_text += "<li><label><input type=\"checkbox\" class=\"toggle-vis\" data-column=\"" + parseInt(i+2) +"\" />"+ table[i].innerHTML +"</label></li>"
    };
    $("#Ul-menu-text").html(menu_text);
	/*<![CDATA[*/
	//表格
	var myTable;
	//表格列定义
	var columnDefs = [ {
		//第一列，用来显示序号
		"searchable" : false,
		"orderable" : false,
		"targets" : 0
	} ];
	var columns = [
			{
				//第一列，用来显示序号
				"data" : null,
				"class" : "text-center"
			},
			{
				"data" : null,
				"class" : "text-center",
				render : function(data, type, row, meta) {
					var result = '';
					result += '<input  type="checkbox" name="subChk"  value="' + row.id + '" />';
					return result;
				}
			},
			{
				"data" : null,
				"class" : "text-center", //最后一列，操作按钮
				render : function(data, type, row, meta) {
					var editUrlPath = myTable.editUrl + row.id + ".gsp"; //修改地址
					var roleUrlPre = /*[[@{/c/user/roleList_{id}.gsp}]]*/'url';
					var result = '';
					//修改按钮
					result += '<button href="'+editUrlPath+'" data-target="#commonWin" data-toggle="modal"  type="button" class="editBtn editBtn-info"><i class="fa fa-pencil"></i>修改</button>&nbsp;';
					//删除按钮
					result += '<button type="button" onclick="myTable.deleteItem(\''
							+ row.id
							+ '\')" class="deleteButton editBtn btn-default"><i class="fa fa-trash-o"></i>删除</button>';
					return result;
				}
			}, {
				"data" : "resourceName",
				"class" : "text-center"
			}, {
				"data" : "type",
				"class" : "text-center",
				render : function(data, type, row, meta) {
					if (data == "1") {
						return '菜单';
					} else if (data == "2") {
						return '按钮';
					}
				} 
			}, {
				"data" : "code",
				"class" : "text-center",
			}, {
				"data" : "permission",
				"class" : "text-center"
			}, {
				"data" : "description",
				"class" : "text-center"
			}, {
				"data" : "sortOrder",
				"class" : "text-center"
			}, {
				"data" : "editable",
				"class" : "text-center",
				render : function(data, type, row, meta) {
					if (data == "1") {
						return '可编辑';
					} else if (data == "2") {
						return '不可编辑';
					}
				} 
			}, {
				"data" : "enabled",
				"class" : "text-center",
				render : function(data, type, row, meta) {
					if (data == "1") {
						return '可用';
					} else if (data == "2") {
						return '不可用';
					}
				} 
			}, {
				"data" : "createDataUsername",
				"class" : "text-center",
			}, {
				"data" : "createDataTime",
				"class" : "text-center",
			} ];
	//ajax参数
	var ajaxDataParamFun = function(d) {
		d.simpleQueryParam = $('#simpleQueryParam').val(); //模糊查询
	};
	//表格setting
	var setting = {
		listUrl : /*[[@{/c/resource/list}]]*/'url',
		editUrl : /*[[@{/m/basicinfo/equipment/simcard/edit_}]]*/'url',
		deleteUrl : /*[[@{/m/basicinfo/equipment/simcard/delete_}]]*/'url',
		deletemoreUrl : /*[[@{/m/basicinfo/equipment/simcard/deletemore}]]*/'url',
		enableUrl : /*[[@{/c/user/enable_}]]*/'url',
		disableUrl : /*[[@{/c/user/disable_}]]*/'url',
		columnDefs : columnDefs, //表格列定义
		columns : columns, //表格列
		dataTableDiv : 'dataTable', //表格
		ajaxDataParamFun : ajaxDataParamFun, //ajax参数
		pageable : true, //是否分页
		showIndexColumn : true, //是否显示第一列的索引列
		enabledChange : true
	};
	//全选
	$("#checkAll").click(function() {
		$("input[name='subChk']").prop("checked", this.checked);
	});
	//单选
	var subChk = $("input[name='subChk']");
	subChk.click(function() {
		$("#checkAll").prop(
				"checked",
				subChk.length == subChk.filter(":checked").length ? true
						: false);
	});
	//创建表格
	myTable = new TG_Tabel.createNew(setting);
	//批量删除
	$("#del_model").click(function() {
		//判断是否至少选择一项
		var chechedNum = $("input[name='subChk']:checked").length;
		if (chechedNum == 0) {
			alert([[#{select.item}]]);
			return

		}
		var checkedList = new Array();
		$("input[name='subChk']:checked").each(function() {
			checkedList.push($(this).val());
		});
		myTable.deleteItems({
			'deltems' : checkedList.toString()
		});
	});
	//加载完成后执行
	$(function() {
		//表格初始化
		myTable.init();
	});
	/*]]>*/
</script>

</html>