(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{175:function(e,i,n){"use strict";n.d(i,"a",(function(){return t}));var a=n(177);function t(e){var i=e;return a.inflate(i,{to:"string"})}},223:function(e,i){e.exports='\x3c!-- rv 代表 realTimeVideo --\x3e\r\n<div class="video-main-content">\r\n  <div class="video-main-left">\r\n    <div class="panel-heading">\r\n      <h3 class="current-page-header">实时视频</h3>\r\n    </div>\r\n    \x3c!-- 组织树 --\x3e\r\n    <div id="treeModule" class="panel-body"></div>\r\n  </div>\r\n  <div class="video-main-right">\r\n    <div class="video-right-top" id="videoRightTop">\r\n      \x3c!-- 视频播放窗口 --\x3e\r\n      <div id="video-module" class="col-md-9">\r\n        <div class="multi-window-container" id="multiWindowContainer"></div>\r\n      </div>\r\n      \x3c!-- 地图 --\x3e\r\n      <div id="map-module" class="col-md-3 map-module">\r\n        <div class="videoMapAllShow" id="videoMapAllShow">\r\n          <i class="fa fa-chevron-left"></i>\r\n        </div>\r\n        <div id="videoMapContainer" class="map-container">\r\n          \x3c!-- 右键监听模块 --\x3e\r\n          <div class="right-click-monitor hidden" id="rightClickMonitor">\r\n            <div class="col-md-4 text-right">\r\n              <img src="/clbs/resources/img/play.png" id="monitorIco" />\r\n            </div>\r\n            <div class="col-md-8 col-padding-zero text-left">\r\n              <span id="monitorText">数据等待中...</span>\r\n            </div>\r\n            <div class="col-md-12 nstSlider-voice" style="margin-top: 5px;">\r\n              <div style="width: 100%;" class="nstSlider audioVoice" data-range_min="0" data-range_max="100"\r\n                data-cur_min="100">\r\n                <div class="leftGrip"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="video-right-bottom">\r\n      \x3c!-- 报警记录/日志记录表格 --\x3e\r\n      <div id="tableModule"></div>\r\n      \x3c!-- 视频操作 --\x3e\r\n      <div id="videoHandleModule"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div id="realTimeVideo-rMenu"></div>\r\n\x3c!--磁盘存储--\x3e\r\n<div class="modal fade" id="diskSaveModal" aria-hidden="true" data-backdrop="static" role="dialog"\r\n  aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>\r\n        <h4 class="modal-title">设置</h4>\r\n      </div>\r\n      <div class="modal-body">\r\n        <form id="specialParamSet" class="form-horizontal" role="form" action="/clbs/realTimeVideo/video/saveDiskInfo"\r\n          method="post">\r\n          <div class="row">\r\n            <div class="form-group">\r\n              <label class="col-md-5 control-label">视频播放缺省时间（s）：</label>\r\n              <div class="col-md-6 right-input">\r\n                <input class="form-control" id="videoPlayTime" value="300" name="videoPlayTime" type="text"\r\n                  placeholder="设置视频播放缺省时间">\r\n              </div>\r\n            </div>\r\n            <div class="form-group">\r\n              <label class="col-md-5 control-label">视频空闲断开时间（s）：</label>\r\n              <div class="col-md-6 right-input">\r\n                <input class="form-control" id="videoRequestTime" value="30" name="videoStopTime" type="text"\r\n                  placeholder="设置视频空闲断开时间">\r\n              </div>\r\n            </div>\r\n            <div class="form-group">\r\n              <label class="col-md-5 control-label">存储容量预警阈值（%）：</label>\r\n              <div class="col-md-6 right-input">\r\n                <input class="form-control" id="ftpStorage" name="memoryRate" type="text" placeholder="设置FTP存储空间">\r\n              </div>\r\n            </div>\r\n            <div class="form-group" style="padding: 0 15px !important;">\r\n              <h3>存储容量状态 <span id="videoMemory" class="pull-right"></span></h3>\r\n              <div class="progress">\r\n                <input id="videoSaveState" name="memory" hidden />\r\n                <div id="videoMemoryProgress" class="progress-bar progress-bar-info" role="progressbar"\r\n                  aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 30%;">\r\n                  \x3c!--<span class="sr-only">30% 完成（信息）</span>--\x3e\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="form-group">\r\n              <label style="padding-right:0;" class="col-md-6 control-label radio-label">\r\n                <input id="videoCovered" type="radio" value="0" name="memoryType" checked>\r\n                存储空间满后自动覆盖\r\n              </label>\r\n              <label style="padding-right:0;" class="col-md-6 control-label radio-label">\r\n                <input id="stopRecording" type="radio" value="1" name="memoryType">\r\n                存储空间满后停止录制\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class="modal-footer">\r\n            <button id="submitBtn" class="btn btn-primary" type="button">提交</button>\r\n            <button id="closeBtn" data-dismiss="modal" class="btn btn-default btn-off" type="button">关闭\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\x3c!-- 视频右键菜单 --\x3e\r\n<ul id="videoMenu" class="videoRightList">\r\n  <li id="closeVideo">关闭视频</li>\r\n  <li id="closeAllVideo">关闭所有视频</li>\r\n  <li id="mainCodeStream">主码流</li>\r\n  <li id="subcodeFlow">子码流</li>\r\n  <li class="showScale" id="scaleShow">显示比例&nbsp;&nbsp;<span class="glyphicon glyphicon-play"></span>\r\n  </li>\r\n  <li id="takePhoto">抓拍</li>\r\n  <div class="scaleList" id="scaleRight">\r\n    <ul>\r\n      <li id="defaultScale">原始比例</li>\r\n      <li id="twoScale">4:3</li>\r\n      <li id="threeScale">16:9</li>\r\n    </ul>\r\n  </div>\r\n  <input type="hidden" id="videoVehicleId" class="form-control" />\r\n  <input type="hidden" id="videoChannelNum" class="form-control" />\r\n  <input type="hidden" id="videoChannelType" class="form-control" />\r\n  <input type="hidden" id="videoDomId" class="form-control" />\r\n</ul>\r\n<label id="error_label" class=\'error\' style=\'display: none;\'></label>\r\n\r\n\x3c!-- 日志内容 --\x3e\r\n<div class="modal fade" id="logDetailDiv" role="dialog" aria-hidden="true" data-backdrop="static"\r\n  aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document" style="width:60%">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n          <span aria-hidden="true">&times;</span>\r\n        </button>\r\n        <h4 class="modal-title">日志内容</h4>\r\n      </div>\r\n      <div class="modal-body" id="logContent">\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\x3c!-- 报警处理 --\x3e\r\n\x3c!-- <div class="modal fade" id="videoWarningManage" role="dialog" style="overflow-y:hidden" data-backdrop="static"\r\n    data-keyboard="false" aria-labelledby="alarmSettingInfo" aria-hidden="true">\r\n    <div class="modal-dialog modal-lg">\r\n        <style>\r\n            #warningManage .modal-dialog {\r\n                width: 900px !important;\r\n            }\r\n        </style>\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span\r\n                        class="sr-only">Close</span></button>\r\n                <h4 class="modal-title">报警处理</h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="row form-horizontal">\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label">监控对象：</label>\r\n                        <div class="col-md-3 dataStatistics-value">\r\n                            <span id="warningCarName"></span>\r\n                        </div>\r\n                        <label class="col-md-3 control-label">从业人员：</label>\r\n                        <div class="col-md-3 dataStatistics-value">\r\n                            <span id="warningPeo"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label">所属分组：</label>\r\n                        <div class="col-md-3 dataStatistics-value">\r\n                            <span id="warningGroup" style="word-break: break-all"></span>\r\n                        </div>\r\n                        <label class="col-md-3 control-label">报警时间：</label>\r\n                        <div class="col-md-3 dataStatistics-value">\r\n                            <span id="warningTime"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label class="col-md-3 control-label">报警类型：</label>\r\n                        <div class="col-md-8 dataStatistics-value warningTypeArea">\r\n                            <span id="warningDescription"></span>\r\n                        </div>\r\n                    </div>\r\n                    \x3c!-- 超速预警 --\x3e\r\n<div class="form-group warningDeal" id="overSpeedGap">\r\n  <label class="col-md-3 control-label">超速预警差值(km/h)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="overSpeedGapValue"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 疲劳驾驶预警 --\x3e\r\n<div class="form-group warningDeal" id="tiredDriveGap">\r\n  <label class="col-md-3 control-label">疲劳驾驶预警差值(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="tiredDriveGapValue"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 碰撞报警 --\x3e\r\n<div class="form-group warningDeal" id="crashWarning">\r\n  <label class="col-md-3 control-label">碰撞时间(ms)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="crashTime"></span>\r\n  </div>\r\n  <label class="col-md-3 control-label">碰撞加速度(0.1g)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="crashSpeed"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 侧翻预警 --\x3e\r\n<div class="form-group warningDeal" id="turnOnWarning">\r\n  <label class="col-md-3 control-label">侧翻角度(度)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="turnOnValue"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 超速报警 --\x3e\r\n<div class="form-group warningDeal" id="overSpeeds">\r\n  <label class="col-md-3 control-label">最高速度(km/h)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="warningSpeed"></span>\r\n  </div>\r\n  <label class="col-md-3 control-label">超速持续时间(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="warningAllTime"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 疲劳驾驶 --\x3e\r\n<div class="form-group warningDeal" id="tiredDrive">\r\n  <label class="col-md-3 control-label">连续驾驶时间门限(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="continuousDriveTime"></span>\r\n  </div>\r\n  <label class="col-md-3 control-label">最小休息时间(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="breakTime"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 当天累计驾驶超时 --\x3e\r\n<div class="form-group warningDeal" id="addUpDrive">\r\n  <label class="col-md-3 control-label">当天累计驾驶时间门限(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="addUpDriveTime"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 超时停车 --\x3e\r\n<div class="form-group warningDeal" id="overTimeStop">\r\n  <label class="col-md-3 control-label">最长停车时间(s)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="overTimeStopTime"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 凌晨2-5点行驶报警 --\x3e\r\n<div class="form-group warningDeal" id="earlyRun">\r\n  <label class="col-md-3 control-label">凌晨2-5点行驶报警参数：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="earlyRunValue"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 车辆非法位移 --\x3e\r\n<div class="form-group warningDeal" id="displacementCar">\r\n  <label class="col-md-3 control-label">车辆非法位移(m)：</label>\r\n  <div class="col-md-3 dataStatistics-value">\r\n    <span id="displacementCarDistance"></span>\r\n  </div>\r\n</div>\r\n\x3c!-- 车机疑似屏蔽报警 --\x3e\r\n<div id="shieldWarning" class="warningDeal">\r\n  <div class="form-group">\r\n    <label class="col-md-3 control-label">离线时间超过时间报警(s)：</label>\r\n    <div class="col-md-3 dataStatistics-value">\r\n      <span id="offLineTime"></span>\r\n    </div>\r\n    <label class="col-md-3 control-label">起始时间：</label>\r\n    <div class="col-md-3 dataStatistics-value">\r\n      <span id="offLineStartTime"></span>\r\n    </div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-3 control-label">结束时间：</label>\r\n    <div class="col-md-3 dataStatistics-value">\r\n      <span id="offLineEndTime"></span>\r\n    </div>\r\n  </div>\r\n</div>\r\n<span id="color" style="color: red; display: none; margin-left: 20px;">注：持续性报警结束前暂时不能处理</span>\r\n<input id="warningType" type="hidden" name="warningType" />\r\n<input type="hidden" id="simcard" name="simcard" />\r\n<input type="hidden" id="vUuid" name="vUuid" />\r\n<input type="hidden" id="device" name="device" />\r\n<input type="hidden" id="sno" name="sno" />\r\n</div>\r\n</div>\r\n</div>\r\n</div>\r\n</div> --\x3e\r\n\x3c!-- 抓拍 --\x3e\r\n<div class="modal fade" id="videoSnap" role="dialog" aria-hidden="true" data-backdrop="static"\r\n  aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n          <span aria-hidden="true">&times;</span>\r\n        </button>\r\n        <h4 class="modal-title">抓拍</h4>\r\n      </div>\r\n      <div class="modal-body">\r\n        <div class="row">\r\n          <div class="form-group">\r\n            <div id="videoPictureSave" class="col-md-12" style="height: 400px; margin-bottom: 5px;">\r\n              <canvas id="canvasForVideo" width="524" height="400"></canvas>\r\n              <input id="videoImage" type="text" name="file" hidden />\r\n              <input id="vehicleId" type="text" name="vehicleId" hidden />\r\n            </div>\r\n            <div class="col-md-12">\r\n              <label class="col-md-3 control-label">监控对象：</label>\r\n              <div class="col-md-3">\r\n                <span id="photoObjName"></span>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-12">\r\n              <label class="col-md-3 control-label">标识颜色：</label>\r\n              <div class="col-md-3">\r\n                <span id="photoObjColor"></span>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-12">\r\n              <label class="col-md-3 control-label">通道号：</label>\r\n              <div class="col-md-3">\r\n                <span id="photoObjNumber"></span>\r\n              </div>\r\n            </div>\r\n            <div class="col-md-12">\r\n              <textarea id="snapText" class="form-control" rows="3"></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" data-dismiss="modal" id="snapSubmit" class="btn btn-primary btn-alarm-manage">提交\r\n        </button>\r\n        <button type="button" data-dismiss="modal" id="" class="btn btn-default btn-alarm-manage">关闭</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\x3c!-- 唤醒 --\x3e\r\n<div class="modal fade" id="wakeupModal" role="dialog" aria-hidden="true" data-backdrop="static"\r\n  aria-labelledby="myModalLabel">\r\n  <div class="modal-dialog" role="document">\r\n    <div class="modal-content">\r\n      <div class="modal-header">\r\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n          <span aria-hidden="true">&times;</span>\r\n        </button>\r\n        <h4 class="modal-title">唤醒</h4>\r\n        <input id="wakeupMonitorId" type="text" hidden />\r\n      </div>\r\n      <div class="modal-body">\r\n        <form id="wakeupForm">\r\n          <div class="row form-horizontal">\r\n            <div class="form-group">\r\n              <div class="col-md-4 col-md-offset-2">\r\n                <input type="text" value="10" id="wakeupTime" name="wakeupTime" class="form-control"\r\n                  placeholder="可输入范围是：0-1000" />\r\n              </div>\r\n              <label class="col-md-4 control-label" style="text-align: left">分钟后，自动进入休眠状态</label>\r\n            </div>\r\n            <div class="form-group">\r\n              <div class="col-md-10 col-md-offset-2">\r\n                <span>(0表示一直处于唤醒状态)</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class="modal-footer">\r\n        <button type="button" id="wakeupSubmit" class="btn btn-primary btn-alarm-manage">提交\r\n        </button>\r\n        <button type="button" id="wakeupClose" class="btn btn-default btn-alarm-manage">关闭</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},224:function(e,i,n){},225:function(e,i){e.exports='<div class="videotree-container">\r\n  <div id="realSetBox" class="clearfix" style="position: relative">\r\n    <div class="col-md-5 col-sm-12 col-xs-12" style="padding: 0px 5px 0px 0px;">\r\n      <select id="videoSearchType" class="form-control">\r\n        <option selected="selected" value="name">监控对象</option>\r\n        <option value="deviceNumber">终端号</option>\r\n        <option value="simcardNumber">终端手机号</option>\r\n        <option value="group">企业</option>\r\n        <option value="assignName">分组</option>\r\n        <option value="professional">从业人员</option>\r\n      </select>\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12" style="padding: 0px 10px 0px 0px;">\r\n      <input autocomplete="off" type="text" style="width: 100%;" id="search_condition" class="form-control" placeholder="请输入关键字">\r\n    </div>\r\n    <div class="col-md-2 col-sm-12 col-xs-12" style="padding: 0px 0px 0px 0px;">\r\n      <button id="realSetBtn" class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"\r\n        aria-haspopup="true" aria-expanded="true">\r\n        <span class="fa fa-cog"></span>\r\n      </button>\r\n      <ul id="videoRealSetMenu" class="dropdown-menu" aria-labelledby="dropdownMenu1">\r\n        <li><a href="javascript:void(0);" id="videoTreeRefresh" name="refresh" title="刷新" data-stoppropagation="true"><i\r\n              class="glyphicon glyphicon-refresh"></i>刷新</a></li>\r\n        <li data-stoppropagation="true"><a href="javascript:void(0);" id="videoTreeShowAliases">\r\n            <label for="videoShowName"><input type="checkbox" id="videoShowName">显示别名</label></a></li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <div class="tree-show-area" id="thetree">\r\n    <div id=\'treeLoading\' style="text-align: center; height: 100px; line-height: 100px; display: none">\r\n      <i class="fa fa-spinner loading-state"></i>\r\n      <span>加载中，请稍后</span>\r\n    </div>\r\n    <ul id="vTreeList" class="ztree"></ul>\r\n    \x3c!-- <div id="noInfo">无数据</div> --\x3e\r\n  </div>\r\n  <div class="vehicle-status">\r\n    <div id="searchOffLine" class="col-md-4 text-right cursor-style">\r\n      <span class="v-not-online"></span>不在线\r\n    </div>\r\n    <div id="searchOnline" class="col-md-4 text-right cursor-style">\r\n      <span class="v-online"></span>在线\r\n    </div>\r\n    <div id="searchHeartBeat" class="col-md-4 text-right cursor-style">\r\n      <span class="v-heartbeat"></span>心跳\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="vehicle-info form-horizontal">\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">监控对象：</label>\r\n    <div class="col-md-7 col-padding-zero" id="vehicleName"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">定位时间：</label>\r\n    <div class="col-md-7 col-padding-zero" id="updateTime"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">终端号：</label>\r\n    <div class="col-md-7 col-padding-zero" id="deviceNo"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">终端手机号：</label>\r\n    <div class="col-md-7 col-padding-zero" id="simNo"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">从业人员：</label>\r\n    <div class="col-md-7 col-padding-zero" id="driverName"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">速度：</label>\r\n    <div class="col-md-7 col-padding-zero" id="updateSpeed"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">ACC：</label>\r\n    <div class="col-md-7 col-padding-zero" id="accStatus"></div>\r\n  </div>\r\n  <div class="form-group">\r\n    <label class="col-md-5 control-label">位置：</label>\r\n    <div class="col-md-7 col-padding-zero" id="formattedAddress"></div>\r\n  </div>\r\n</div>'},226:function(e,i,n){},227:function(e,i){e.exports='<ul class="nav nav-tabs" role="tablist">\r\n    <li id="warnRecord" class="active"><a href="#alarmRecord" data-toggle="tab">报警记录</a></li>\r\n    <li id="operationLog" class=""><a href="#logging" data-toggle="tab">日志记录</a></li>\r\n    <li class="tab-hide-down">\r\n        \x3c!-- 特殊参数设置按钮 --\x3e\r\n        <i id="setBtn" class="glyphicon glyphicon-cog" style="display: none"></i>\r\n        \x3c!-- 向下隐藏按钮 --\x3e\r\n        <i id="realtimeScalingBtn" class="fa fa-chevron-up"></i>\r\n    </li>\r\n</ul>\r\n<div class="tab-content">\r\n    \x3c!-- 报警记录 --\x3e\r\n    <div role="tabpanel" class="tab-pane active" id="alarmRecord">\r\n        <table id="alarmRecordDataTable" class="table table-striped table-bordered table-hover" cellspacing="0"\r\n            width="100%">\r\n            <thead>\r\n                <tr>\r\n                    <th width="50px">序号</th>\r\n                    <th>监控对象</th>\r\n                    <th>报警时间</th>\r\n                    <th>处理状态</th>\r\n                    <th>所属分组</th>\r\n                    <th>对象类型</th>\r\n                    <th>车牌颜色</th>\r\n                    <th>报警类型</th>\r\n                    <th>报警开始速度</th>\r\n                    <th>行车记录仪速度</th>\r\n                    <th>从业人员</th>\r\n                    <th>围栏类型</th>\r\n                    <th>围栏名称</th>\r\n                    <th>报警位置</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody></tbody>\r\n        </table>\r\n    </div>\r\n    \x3c!-- 日志记录 --\x3e\r\n    <div role="tabpanel" class="tab-pane" id="logging">\r\n        <table id="loggingDataTable" class="table table-striped table-bordered table-hover" cellspacing="0"\r\n            width="100%">\r\n            <thead>\r\n                <tr>\r\n                    <th width="50px">序号</th>\r\n                    <th>时间</th>\r\n                    <th>IP地址</th>\r\n                    <th>操作人</th>\r\n                    <th>监控对象</th>\r\n                    <th>车牌颜色</th>\r\n                    <th>内容描述</th>\r\n                    <th>日志类型</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody></tbody>\r\n        </table>\r\n    </div>\r\n</div>'},228:function(e,i,n){},229:function(e,i){e.exports='\x3c!-- 控制面板模块 --\x3e\r\n<div class="video-control-panel">\r\n    \x3c!-- 云台 --\x3e\r\n    <i id="videoYunSett" class="video-yun-sett"></i>\r\n    \x3c!-- 亮度 --\x3e\r\n    <i id="videoDimming" class="video-dimming"></i>\r\n    \x3c!-- 屏幕分隔 --\x3e\r\n    <div id="videoSeparated">\r\n        <i id="window-4" class="video-four video-number active" data-num="4"></i>\r\n        <i id="window-6" class="video-six video-number" data-num="6"></i>\r\n        <i id="window-9" class="video-nine video-number" data-num="9"></i>\r\n        <i id="window-10" class="video-ten video-number" data-num="10"></i>\r\n        <i id="window-16" class="video-sixteen video-number" data-num="16"></i>\r\n    </div>\r\n    \x3c!-- 左侧及底部 --\x3e\r\n    <i id="newVideoWin" class="video-win" title=""></i>\r\n    \x3c!-- 全屏 --\x3e\r\n    <i id="realVideoFullScreen" class="video-full-screen" title=""></i>\r\n</div>\r\n\r\n\x3c!-- 视频画面控制 --\x3e\r\n<div class="modal fade" id="videoScreenControl" tabindex="-1" aria-hidden="false" data-backdrop="static" role="dialog">\r\n    <div class="modal-dialog" role="document" style="width: 500px !important">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                        aria-hidden="true">&times;</span>\r\n                </button>\r\n                <h4 class="modal-title">视频画面控制 </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div class="row form-horizontal">\r\n                    \x3c!-- 亮度 --\x3e\r\n                    <div class="form-group">\r\n                        <div class="col-md-3 text-right control-label">亮度：</div>\r\n                        <div class="col-md-6">\r\n                            <div class="nstSlider nsBrightness" data-range_min="0" data-range_max="255"\r\n                                data-cur_min="255">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 text-center"><input type="text" class="form-control inp-brightness"\r\n                                id="brightnessVal" readonly /></div>\r\n                    </div>\r\n                    \x3c!-- 色度 --\x3e\r\n                    <div class="form-group">\r\n                        <div class="col-md-3 text-right control-label">色度：</div>\r\n                        <div class="col-md-6">\r\n                            <div class="nstSlider nsChroma" data-range_min="0" data-range_max="360" data-cur_min="0">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 text-center"><input type="text" class="form-control inp-brightness"\r\n                                id="chromaVal" readonly /></div>\r\n                    </div>\r\n                    \x3c!-- 对比度 --\x3e\r\n                    <div class="form-group">\r\n                        <div class="col-md-3 text-right control-label">对比度：</div>\r\n                        <div class="col-md-6">\r\n                            <div class="nstSlider nsContrast" data-range_min="0" data-range_max="255" data-cur_min="51">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 text-center"><input type="text" class="form-control inp-brightness"\r\n                                id="contrastVal" readonly /></div>\r\n                    </div>\r\n                    \x3c!-- 饱和度 --\x3e\r\n                    <div class="form-group">\r\n                        <div class="col-md-3 text-right control-label">饱和度：</div>\r\n                        <div class="col-md-6">\r\n                            <div class="nstSlider nsSaturation" data-range_min="0" data-range_max="255"\r\n                                data-cur_min="51">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 text-center"><input type="text" class="form-control inp-brightness"\r\n                                id="saturationVal" readonly /></div>\r\n                    </div>\r\n                    \x3c!-- 音量 --\x3e\r\n                    <div class="form-group">\r\n                        <div class="col-md-3 text-right control-label">音量：</div>\r\n                        <div class="col-md-6">\r\n                            <div class="nstSlider nsVolume" data-range_min="0" data-range_max="100" data-cur_min="50">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 text-center"><input type="text" class="form-control inp-brightness"\r\n                                id="volumeVal" readonly /></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- 云台 --\x3e\r\n<div class="modal fade" id="haeundaeModal" tabindex="-1" aria-hidden="false" data-backdrop="static" role="dialog">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                        aria-hidden="true">&times;</span>\r\n                </button>\r\n                <h4 class="modal-title" id="haeundaeBrand"></h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <input id="connectState" type="text" hidden />\r\n                <div class="row">\r\n                    <div class="pull-left cloud-left">\r\n                        <table>\r\n                            <tr>\r\n                                <td><i id="haeundaeLeftTop"></i></td>\r\n                                <td><i id="haeundaeTop"></i></td>\r\n                                <td><i id="haeundaeRightTop"></i></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><i id="haeundaeLeft"></i></td>\r\n                                <td><i id="haeundaeCenter"></i></td>\r\n                                <td><i id="haeundaeRight"></i></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><i id="haeundaeLeftBottom"></i></td>\r\n                                <td><i id="haeundaeBottom"></i></td>\r\n                                <td><i id="haeundaeRightBottom"></i></td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <div class="pull-right cloud-right">\r\n                        <div class="cloud-right-top">\r\n                            <div class="col-md-7 col-padding-zero">\r\n                                <div class="col-md-4 col-padding-five btn-group-vertical" role="group">\r\n                                    <button type="button" class="btn btn-default btn-vertical-default" id="zoomPlus"><i\r\n                                            class="plus"></i></button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default">变焦</button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default" id="zoomLess"><i\r\n                                            class="less"></i></button>\r\n                                </div>\r\n                                <div class="col-md-4 col-padding-five btn-group-vertical" role="group">\r\n                                    <button type="button" class="btn btn-default btn-vertical-default" id="doublePlus">\r\n                                        <i class="plus"></i></button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default">变倍</button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default" id="doubleLess">\r\n                                        <i class="less"></i></button>\r\n                                </div>\r\n                                <div class="col-md-4 col-padding-five btn-group-vertical" role="group">\r\n                                    <button type="button" class="btn btn-default btn-vertical-default"\r\n                                        id="aperturePlus"><i class="plus"></i></button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default">光圈</button>\r\n                                    <button type="button" class="btn btn-default btn-vertical-default"\r\n                                        id="apertureLess"><i class="less"></i></button>\r\n                                </div>\r\n                            </div>\r\n                            <div class="col-md-5 col-padding-zero">\r\n                                <div class="col-md-12 text-center">灯光</div>\r\n                                <div class="col-md-12">\r\n                                    <label class="ag-switch">\r\n                                        <input type="checkbox" id="haeundaeLight" />\r\n                                        <i></i>\r\n                                    </label>\r\n                                </div>\r\n                                <div class="col-md-12 text-center">雨刷</div>\r\n                                <div class="col-md-12">\r\n                                    <label class="ag-switch">\r\n                                        <input type="checkbox" id="haeundaeWipers" />\r\n                                        <i></i>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="cloud-right-bottom">\r\n                            <div class="left-grip">速度：慢</div>\r\n                            <div class="nstSlider haeundaeNstSlider" data-range_min="0" data-range_max="255"\r\n                                data-cur_min="127">\r\n                                <div class="leftGrip"></div>\r\n                            </div>\r\n                            <div class="right-grip">快</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},230:function(e,i,n){},231:function(e,i){window.realTimeVideoCommon={map:function(){this.data=new Object,this.set=function(e,i){this.data[e]=i},this.get=function(e){return this.data[e]},this.has=function(e){return!!this.data[e]},this.size=function(){return Object.keys(this.data).length},this.keys=function(){return Object.keys(this.data)},this.remove=function(e){delete this.data[e]}},getAddressUrl:function(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(i);return null!=n?decodeURIComponent(n[2]):null}}},232:function(e,i){var n={setInfo:function(e){if(e){var i=e.data.msgBody,n={vehicleName:i.monitorInfo.monitorName,time:this.timeTransform(i.gpsTime),deviceNumber:i.monitorInfo.deviceNumber,simcardNumber:i.monitorInfo.simcardNumber,professionalsName:""===i.monitorInfo.professionalsName||"null"===i.monitorInfo.professionalsName||null===i.monitorInfo.professionalsName||void 0===i.monitorInfo.professionalsName?"-":i.monitorInfo.professionalsName,acc:1===i.acc?"开":"关",speed:i.gpsSpeed,positionDescription:""===i.positionDescription||null==i.positionDescription||"null"===i.positionDescription?"未定位":i.positionDescription};this.updateSubscribeInfo(n)}else this.clearSubscribeInfo()},timeTransform:function(e){return e?20+e.substring(0,2)+"-"+e.substring(2,4)+"-"+e.substring(4,6)+" "+e.substring(6,8)+":"+e.substring(8,10)+":"+e.substring(10,12):""},updateSubscribeInfo:function(e){$("#vehicleName").text(e.vehicleName),$("#updateTime").text(e.time),$("#deviceNo").text(e.deviceNumber),$("#simNo").text(e.simcardNumber),$("#driverName").text(e.professionalsName),$("#accStatus").text(e.acc),$("#updateSpeed").text(e.speed+"km/h"),$("#formattedAddress").text(e.positionDescription)},clearSubscribeInfo:function(){$("#vehicleName").text(""),$("#updateTime").text(""),$("#deviceNo").text(""),$("#simNo").text(""),$("#driverName").text(""),$("#accStatus").text(""),$("#updateSpeed").text(""),$("#formattedAddress").text("")}};window.LocationInfo={subscribeInfo:n}},233:function(e,i){var n,a,t,o=new window.realTimeVideoCommon.map,r=new window.realTimeVideoCommon.map,l=new window.realTimeVideoCommon.map,d={init:function(){(n=new AMap.Map("map-module",{resizeEnable:!0,zoom:18})).on("click",this.onMapClick),n.on("moveend",this.getMapArea),n.on("zoomchange",this.mapZoomChange.bind(this))},onMapClick:function(){},getMapArea:function(){var e=n.getBounds().getSouthWest(),i=n.getBounds().getNorthEast(),a=i.lng-.2*(i.lng-e.lng),o=i.lat-.2*(i.lat-e.lat),r=[e.lng+.2*(i.lng-e.lng),e.lat+.2*(i.lat-e.lat)],l=[a,o];t=new AMap.Bounds(r,l)},mapZoomChange:function(){if(r.has(a)&&o.has(a)){var e=r.get(a),i=o.get(a),n=e.getPosition(),t=i[i.length-1];t.longitude=n.lng,t.latitude=n.lat,this.createMonitorName(t)}this.getMapArea()},setMarkersData:function(e){var i=e.data.msgBody,n={monitorId:i.monitorInfo.monitorId,vehicleName:i.monitorInfo.monitorName,longitude:i.longitude,latitude:i.latitude,monitorIcon:i.monitorInfo.monitorIcon,stateInfo:i.stateInfo,time:this.timeTransform(i.gpsTime),direction:Number(i.direction)+270};this.updateMarkerData(n)},timeTransform:function(e){return e?20+e.substring(0,2)+"-"+e.substring(2,4)+"-"+e.substring(4,6)+" "+e.substring(6,8)+":"+e.substring(8,10)+":"+e.substring(10,12):""},updateMarkerData:function(e){var i=e.monitorId;if(o.has(i)){var n=o.get(i);n.push(e),o.set(i,n)}else o.set(i,[e]);r.has(i)||(this.createMonitorMarker(e),this.createMonitorName(e)),2===o.get(i).length&&this.markerMove(i)},createMonitorMarker:function(e){var i,a=this;i="null"===e.monitorIcon||void 0===e.monitorIcon||null===e.monitorIcon?"/clbs/resources/img/vehicle.png":"/clbs/resources/img/vico/"+e.monitorIcon;var t=new AMap.Marker({position:[e.longitude,e.latitude],icon:i,offset:new AMap.Pixel(-29,-13),autoRotation:!0,map:n});t.on("moving",(function(i){a.markerMoving(e.monitorId,i)})),t.on("moveend",(function(){a.markerMoveend(e.monitorId)})),n.setCenter([e.longitude,e.latitude]),r.set(e.monitorId,t)},createMonitorName:function(e){var i=this.monitorStateClass(e.stateInfo),a=0;r.has(e.monitorInfo)&&((a=(h=r.get(e.monitorId)).getAngle())>360&&(a-=360*Math.floor(a/360)));var t=n.lngLatToContainer([e.longitude,e.latitude]),o=t.getX(),d=t.getY(),s=[o,d],c=[o+29,d+13],m=this.countAnglePX(a,c,s,29,13),u=n.containTolnglat(new AMap.Pixel(m[0],m[1])),v="<p class='carNameShowRD'><i class='"+i+"'></i>&ensp;<span class='monitorNameBox'>"+e.vehicleName+"</span></p>";if(l.has(e.monitorId)){var h;(h=l.get(e.monitorId)).setContent(v),h.setPosition(u)}else{var p=new AMap.Marker({position:u,content:v,offset:new AMap.Pixel(0,0),autoRotation:!0,map:n,zIndex:999});l.set(e.monitorId,p)}},monitorStateClass:function(e){switch(e){case 4:case 10:case 5:case 2:return"carStateRun";case 3:return"carStateOffLine";case 9:return"carStateRun";case 11:return"carStateheartBeat"}},countAnglePX:function(e,i,n,a,t){var o,r;return(e<=45&&e>0||e>180&&e<=225||e>=135&&e<180||e>=315&&e<360)&&(e=0),(e<90&&e>45||e<270&&e>225||e>90&&e<135||e>270&&e<315)&&(e=90),90!==e&&270!==e||(o=n[0]+t,r=n[1]+a),0!==e&&180!==e&&360!==e||(o=i[0],r=i[1]),[o,r]},markerMove:function(e){if(a!==e)return!1;var i=o.get(e),n=i[0],t=i[1],l=i[i.length-1],d=new Date(n.time).getTime(),s=new Date(t.time).getTime();if((new Date(l.time).getTime()-d)/1e3/60<1)if(n.longitude===t.longitude&&n.latitude===t.latitude)i.splice(0,1),o.set(e,i),i.length>=2&&this.markerMove(e);else{var c=r.get(e),m=this.getDistance(n,t),u=this.getMoveSpeed(m,s-d);u>=230?(i.splice(0,1),o.set(e,i)):c.moveTo([t.longitude,t.latitude],u)}else{var v=i.pop();o.set(e,v),this.monitorJumpPoint(e)}},markerMoving:function(e,i){if(o.has(e)){var a=o.get(e)[1];a.longitude=i.passedPath[1].lng,a.latitude=i.passedPath[1].lat;var r=[i.passedPath[1].lng,i.passedPath[1].lat];t&&!t.contains(r)&&(n.setCenter(r),this.getMapArea()),this.createMonitorName(a)}},markerMoveend:function(e){var i=o.get(e);i.splice(0,1),o.set(e,i),i.length>3?(i.splice(0,i.length-1),o.set(e,i),this.monitorJumpPoint(e)):i.length>=2&&this.markerMove(e)},getDistance:function(e,i){var n=new AMap.LngLat(e.longitude,e.latitude),a=new AMap.LngLat(i.longitude,i.latitude);return n.distance(a)},getMoveSpeed:function(e,i){var n=300;if(null!=e){var a=i/1e3/60/60;n=0===a?50:Number((e/1e3/a).toFixed(2))}return 0===n?100:n},monitorJumpPoint:function(e){var i=r.get(e),n=o.get(e);i.setPosition([n[0].longitude,n[0].latitude]),this.getMapArea()},monitorHide:function(e){if(r.has(e)){var i=r.get(e);i.stopMove(),i.hide()}l.has(e)&&l.get(e).hide()},monitorShow:function(e){if(r.has(e)&&o.has(e)&&l.has(e)){var i=r.get(e),a=o.get(e),t=l.get(e);i.show(),i.setPosition([a[a.length-1].longitude,a[a.length-1].latitude]),n.setCenter([a[a.length-1].longitude,a[a.length-1].latitude]),t.show(),this.createMonitorName(a[a.length-1]),o.set(e,[a[a.length-1]])}},setCurrentMonitorId:function(e){a=e},getCurrentMonitorId:function(){return a},isSubscribe:function(e){return o.has(e)},clearData:function(e){if(r.has(e)){var i=r.get(e);i.stopMove(),n.remove([i]),r.remove(e)}if(l.has(e)){var t=l.get(e);n.remove([t]),l.remove(e)}o.remove(e),a===e&&(a=null)},getSubscribeInfoMap:function(){return o}};window.Map={map:d}},234:function(e,i){var n,a,t,o=new window.realTimeVideoCommon.map,r={init:function(){var e=this;webSocket.send("/app/vehicle/subscribeStatus",headers,null),this.getFormatTime((function(){webSocket.subscribe(headers,"/topic/deviceReportLog",e.logFindCilck.bind(e),null,null)})),this.checkAlarmRole()},subscribeAlarmFn:function(e){var i=JSON.parse(e.body),n=i.data.msgBody.protocolType,a=window.Tree.tree.getUserMonitorIds();-1!==$.inArray(i.desc.monitorId,a)&&null!=n&&this.isValidVideoProtocol(Number(n))&&this.alarmDataAssembly(i.data.msgBody)},isValidVideoProtocol:function(e){return-1!==[1,11,12,13,14,15,16,17,18,20,21,22,23].indexOf(e)},alarmDataAssembly:function(e){var i=12===e.gpsTime.length?this.getTime(e.gpsTime):"时间异常",n=e.monitorInfo.assignmentName?e.monitorInfo.assignmentName:"未绑定分组",a={monitorName:e.monitorInfo.monitorName,alarmTime:i,assignmentName:n,monitorType:this.monitorType(e.monitorInfo.monitorType),plateColor:getPlateColor(e.monitorInfo.plateColor),alarmType:e.alarmName,speed:e.speed,recorderSpeed:e.recorderSpeed,professionalsName:e.monitorInfo.professionalsName,fenceType:e.fenceType,fenceName:e.fenceName,longitude:e.longitude,latitude:e.latitude,monitorId:e.monitorInfo.monitorId,earlyAlarmStartTime:e.earlyAlarmStartTimeStr,globalAlarmSet:e.globalAlarmSet,alarmSource:e.alarmSource,simcardNumber:e.monitorInfo.simcardNumber,deviceNumber:e.monitorInfo.deviceNumber,swiftNumber:e.swiftNumber,protocolType:e.protocolType};this.updateAlarmData(a)},updateAlarmData:function(e){var i,n=this,a=!1;if(o.has(e.monitorId)){a=!0;var r=o.get(e.monitorId);-1===r.alarmType.indexOf(e.alarmType)&&(e.alarmType=r.alarmType+","+e.alarmType)}o.set(e.monitorId,e),i="22"!==e.protocolType&&t?'<td id="alarm'+e.monitorId+'handle" style="color:#2ca2d1">未处理</td>':"<td>未处理</td>";let l=e.speed,d=e.recorderSpeed,s=e.professionalsName,c=e.fenceType,m=e.fenceName;var u="<td></td><td>"+e.monitorName+"</td><td>"+e.alarmTime+"</td>"+i+"<td>"+e.assignmentName+"</td><td>"+e.monitorType+"</td><td>"+e.plateColor+"</td><td>"+e.alarmType+"</td><td>"+(null==l?"":l)+"</td><td>"+(null==d?"":d)+"</td><td>"+(null==s?"":s)+"</td><td>"+(null==c?"":c)+"</td><td>"+(null==m?"":m)+'</td><td id="alarm'+e.monitorId+'address"><a id="alarmAddress'+e.monitorId+'">点击获取位置信息</a></td>';if(a)$("#alarm"+e.monitorId).html(u);else{var v='<tr id="alarm'+e.monitorId+'">'+u+"</tr>";$("#alarmRecordDataTable tbody").prepend(v),this.onAlarmTableDblclick(e.monitorId),this.layoutChange()}this.alarmTableSort(),$("#alarm"+e.monitorId+"handle").unbind("click").bind("click",(function(){n.warningManage(e.monitorId)})),$("#alarmAddress"+e.monitorId).unbind("click").bind("click",(function(){n.getAlarmAddress(e.monitorId)}))},alarmTableSort:function(){$("#alarmRecordDataTable tbody tr").each((function(e){$(this).children("td:nth-child(1)").text(e+1)}))},onAlarmTableDblclick:function(e){$("#alarm"+e).unbind("dblclick").bind("dblclick",(function(){var i=o.get(e),n=i.alarmTime,a=i.earlyAlarmStartTime,t=i.alarmType,r=!1,l=$("#permissionUrls").val();null!=l&&(l.split(",").indexOf("/a/search/list")>-1&&(r=!0,a||(a=n),location.href="/clbs/a/search/list?avid="+alarmVid+"&atype=0&atime="+a+"&alarmTypeArr="+t));r||layer.msg("无操作权限，请联系管理员")}))},getTime:function(e){return 20+e.substring(0,2)+"-"+e.substring(2,4)+"-"+e.substring(4,6)+" "+e.substring(6,8)+":"+e.substring(8,10)+":"+e.substring(10,12)},monitorType:function(e){switch(e){case 0:return"车";case 1:return"人";case 2:return"物";default:return""}},tableStateChange:function(){$("#realtimeScalingBtn").hasClass("fa fa-chevron-down")?this.tableContentHide():this.tableContentShow()},tableContentHide:function(){$("#videoRightTop").css("height","calc(100% - 44px)"),this.videoSeparatedAdaptHide(),$("#realtimeScalingBtn").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-up")},tableContentShow:function(){this.videoSeparatedAdaptShow(),$("#realtimeScalingBtn").removeClass("fa fa-chevron-up").addClass("fa fa-chevron-down"),this.layoutChange()},layoutChange:function(){var e;if(!$("#realtimeScalingBtn").hasClass("fa-chevron-up"))if($("#warnRecord").hasClass("active")?(e=$("#alarmRecordDataTable tbody tr").length,$("#alarmRecord").css({overflow:"auto","max-height":"250px"})):$("#operationLog").hasClass("active")&&(e=$("#loggingDataTable tbody tr").length,$("#logging").css({overflow:"auto","max-height":"250px"})),e<=5){var i=85+41*e+13+15+"px";$("#videoRightTop").css("height","calc(100% - "+i+")")}else i="318px",$("#videoRightTop").css("height","calc(100% - "+i+")")},getBottomHeight:function(){var e;return $("#warnRecord").hasClass("active")?e=$("#alarmRecordDataTable tbody tr").length:$("#operationLog").hasClass("active")&&(e=$("#loggingDataTable tbody tr").length),e<=5?85+41*e+13+15:318},videoSeparatedAdaptHide:function(){var e=$("#videoMainRight").height();if($("#videoFour").hasClass("video-four-check")){var i=50,n=(e-42)/2;$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"})}else if($("#videoSix").hasClass("video-six-check")){i=100/3,n=(e-42)/3,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"});var a=2*i,t=2*n;$("#video-module div.v-one").css({width:a+"%",height:"calc(100% - (100% - "+(t-.1)+"px))"})}else $("#videoNine").hasClass("video-nine-check")?(i=100/3,n=(e-42)/3,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"})):$("#videoTen").hasClass("video-ten-check")?(i=20,n=(e-42)/5,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"}),a=4*i,t=4*n,$("#video-module div.v-one").css({width:a+"%",height:"calc(100% - (100% - "+(t-.1)+"px))"})):$("#videoSixteen").hasClass("video-sixteen-check")&&(i=25,n=(e-42)/4,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"}))},videoSeparatedAdaptShow:function(){var e=$("#videoMainRight").height(),i=this.getBottomHeight();if($("#videoFour").hasClass("video-four-check")){var n=50,a=(e-i)/2;$("#video-module>div").css({width:n+"%",height:"calc(100% - (100% - "+a+"px))"})}else if($("#videoSix").hasClass("video-six-check")){n=100/3,a=(e-i)/3,$("#video-module>div").css({width:n+"%",height:"calc(100% - (100% - "+a+"px))"});var t=2*n,o=2*a;$("#video-module div.v-one").css({width:t+"%",height:"calc(100% - (100% - "+(o-.1)+"px))"})}else $("#videoNine").hasClass("video-nine-check")?(n=100/3,a=(e-i)/3,$("#video-module>div").css({width:n+"%",height:"calc(100% - (100% - "+a+"px))"})):$("#videoTen").hasClass("video-ten-check")?(n=20,a=(e-i)/5,$("#video-module>div").css({width:n+"%",height:"calc(100% - (100% - "+a+"px))"}),t=4*n,o=4*a,$("#video-module div.v-one").css({width:t+"%",height:"calc(100% - (100% - "+(o-.1)+"px))"})):$("#videoSixteen").hasClass("video-sixteen-check")&&(n=25,a=(e-i)/4,$("#video-module>div").css({width:n+"%",height:"calc(100% - (100% - "+a+"px))"}))},warningManage:function(e){var i=this,a=o.get(e);$(".sendTextFooter").hide(),$(".takePicturesFooter").hide(),$("#alarm-remark").show(),$("#smsTxt").val(""),$("#time").val(""),$("#alarmRemark").val(""),layer.closeAll(),$("#warningManage").modal("show");var t="/clbs/v/monitoring/getDeviceTypeByVid";json_ajax("POST",t,"json",!0,{vehicleId:e},(function(o){var r=o.obj.warningType;n=o.obj.deviceType;var l=a.globalAlarmSet.split(",");"11"===n||"20"===n||"21"===n?($(".newDeviceInfo").show(),$(".oldDeviceInfo").hide(),$("#minResolution, #maxResolution").show(),$("#defaultValue").attr("selected",!1)):($(".newDeviceInfo").hide(),$(".oldDeviceInfo").show(),$("#minResolution, #maxResolution").hide(),$("#defaultValue").attr("selected",!0));for(var d=$("#color"),s=["1","2","4","5","6","7","8","9","10","11","12","13","14","29","30","18","19","23","24","25","26"],c=0;c<l.length;c++){if(-1!==$.inArray(l[c],s)){$("#warningManageListening").attr("disabled","disabled"),$("#warningManagePhoto").attr("disabled","disabled"),$("#warningManageSend").attr("disabled","disabled"),$("#warningManageAffirm").attr("disabled","disabled"),$("#warningManageFuture").attr("disabled","disabled"),$("#warningManageCancel").attr("disabled","disabled"),d.show(),d.text("注：持续性报警结束前暂时不能处理");break}}var m={vehicleId:e,type:a.globalAlarmSet,startTime:a.alarmTime};layer.load(2),json_ajax("POST","/clbs/a/search/findEndTime","json",!0,m,(function(e){!0===e.success?"0"===e.msg?(d.show(),d.text("请双击记录，前往报警查询模块处理多类型报警"),$("#warningManageListening").attr("disabled","disabled"),$("#warningManagePhoto").attr("disabled","disabled"),$("#warningManageSend").attr("disabled","disabled"),$("#warningManageAffirm").attr("disabled","disabled"),$("#warningManageFuture").attr("disabled","disabled"),$("#warningManageCancel").attr("disabled","disabled")):(d.show(),d.text("注：持续性报警结束前暂时不能处理")):($("#warningManageListening").removeAttr("disabled"),$("#warningManagePhoto").removeAttr("disabled"),$("#warningManageSend").removeAttr("disabled"),$("#warningManageAffirm").removeAttr("disabled"),$("#warningManageFuture").removeAttr("disabled"),$("#warningManageCancel").removeAttr("disabled"),d.hide(),$("#colorMore").hide(),layer.closeAll())})),$("#listeningContent,#takePicturesContent,#sendTextMessages").hide(),!0===r||"人"===a.monitorType||"1"===a.alarmSource?($("#warningHiden").removeAttr("style"),$("#warningManageListening").hide(),$("#warningManagePhoto").hide(),$("#warningManageSend").hide(),$("#sno").val("0")):($("#warningHiden").attr("style","text-align:center"),$("#warningManageListening").show(),$("#warningManagePhoto").show(),$("#warningManageSend").show(),$("#sno").val(a.swiftNumber)),$("#warningCarName").text(a.monitorName),$("#warningTime").text(a.alarmTime),$("#warningGroup").text(a.assignmentName),$("#warningDescription").text(a.alarmType),$("#warningPeo").text(a.professionalsName||""),$("#simcard").val(a.simcardNumber),$("#device").val(a.deviceNumber),$("#warningType").val(a.globalAlarmSet),$("#vUuid").val(e),t="/clbs/v/monitoring/getAlarmParam";var u={vehicleId:e,alarm:a.alarmType};json_ajax("POST",t,"json",!0,u,i.getAlarmParam)}))},getAlarmParam:function(e){$(".warningDeal").hide();var i=e.obj.length,n=e.obj;if(0!==i)for(var a=0;a<i;a++){var t=n[a].name,o=n[a].parameterValue,r=n[a].paramCode;"超速预警"===t&&($("#overSpeedGap").show(),$("#overSpeedGapValue").text(o)),"疲劳驾驶预警"===t&&($("#tiredDriveGap").show(),$("#tiredDriveGapValue").text(o)),"碰撞预警"===t&&($("#crashWarning").show(),"param1"===r?$("#crashTime").text(o):"param2"===r&&$("#crashSpeed").text(o)),"侧翻预警"===t&&($("#turnOnWarning").show(),$("#turnOnValue").text(o)),"超速报警"===t&&($("#overSpeeds").show(),"param1"===r?$("#warningSpeed").text(o):"param2"===r&&$("#warningAllTime").text(o)),"疲劳驾驶"===t&&($("#tiredDrive").show(),"param1"===r?$("#continuousDriveTime").text(o&&"null"!==o?o:""):"param2"===r&&$("#breakTime").text(o)),"当天累积驾驶超时"===t&&($("#addUpDrive").show(),$("#addUpDriveTime").text(o)),"超时停车"===t&&($("#overTimeStop").show(),$("#overTimeStopTime").text(o)),"凌晨2-5点行驶报警"===t&&($("#earlyRun").show(),$("#earlyRunValue").text(o)),"车辆非法位移"===t&&($("#displacementCar").show(),$("#displacementCarDistance").text(o)),"车机疑似屏蔽报警"===t&&($("#shieldWarning").show(),"param1"===r?$("#offLineTime").text(o):"param2"===r?$("#offLineStartTime").text(o):"param3"===r&&$("#offLineEndTime").text(o))}},getAlarmAddress:function(e){var i=o.get(e),n={addressReverse:[i.latitude,i.longitude,"","","vehicle"]};$.ajax({type:"POST",url:"/clbs/v/monitoring/address",dataType:"json",async:!0,data:n,traditional:!0,timeout:8e3,success:function(i){$("#alarm"+e+"address").html($.isPlainObject(i)?"未定位":i)}})},goListen:function(){var e=$("#listeningContent");e.is(":hidden")?(e.slideDown(),$(".listenFooter").show(),$("#takePicturesContent").hide(),$(".takePicturesFooter").hide(),$("#sendTextMessages").hide(),$(".sendTextFooter").hide()):(e.slideUp(),$(".listenFooter").hide()),this.logFindCilck()},logFindCilck:function(){address_submit("POST","/clbs/m/reportManagement/logSearch/findLog","json",!0,{eventDate:a,webType:2},!0,this.logFind.bind(this))},logFind:function(e){var i=$("#loggingDataTable");i.children("tbody").empty();for(var n,a,t="",o=0;o<e.length;o++)"1"===e[o].logSource?(n="终端上传",a="<a style='cursor: pointer' data-message='"+e[o].message+"'>"+e[o].monitoringOperation+"</a>"):"2"===e[o].logSource?(n="平台下发",a=e[o].message):(n="平台操作",a="批量文本信息下发"===e[o].monitoringOperation?"<a style='cursor: pointer' data-message='"+e[o].message+"'>"+e[o].monitoringOperation+"</a>":e[o].message),t+="<tr><td>"+(o+1)+"</td><td>"+e[o].eventDate+"</td><td>"+(null!=e[o].ipAddress?e[o].ipAddress:"")+"</td><td>"+(null!=e[o].username?e[o].username:"")+"</td><td>"+e[o].brand+"</td><td>"+(""===e[o].plateColorStr?"-":e[o].plateColorStr)+"</td><td>"+a+"</td><td>"+n+"</td></tr>";i.children("tbody").append(t),$("#loggingDataTable tbody a").unbind("click").bind("click",this.showLogContent),$("#scalingBtn").hasClass("fa-chevron-down")&&this.videoSeparatedAdaptShow(),this.layoutChange()},showLogContent:function(){var e=$(this).attr("data-message");$("#logDetailDiv").modal("show"),$("#logContent").html(e)},photo:function(){var e=$("#takePicturesContent");e.is(":hidden")?(e.slideDown(),$(".takePicturesFooter").show(),$("#sendTextMessages").hide(),$(".sendTextFooter").hide(),$("#listeningContent").hide(),$(".listenFooter").hide()):(e.slideUp(),$(".takePicturesFooter").hide()),this.logFindCilck(),$("#videoMenu").hide()},send:function(){var e=$("#sendTextMessages");e.is(":hidden")?(e.slideDown(),$(".sendTextFooter").show(),$("#takePicturesContent").hide(),$(".takePicturesFooter").hide(),$("#listeningContent").hide(),$(".listenFooter").hide()):(e.slideUp(),$(".sendTextFooter").hide()),this.logFindCilck()},handleAlarm:function(e){var i=$("#warningTime").text(),n=$("#warningCarName").text(),a=$("#warningDescription").text(),t=$("#vUuid").val(),o=$("#simcard").val(),r=$("#device").val(),l=$("#sno").val(),d=$("#warningType").val(),s=$("#alarmRemark").val();json_ajax("POST","/clbs/v/monitoring/handleAlarm","json",!0,{vehicleId:t,plateNumber:n,alarm:d,description:a,handleType:e,startTime:i,simcard:o,device:r,sno:l,webType:2,remark:s},(function(){setTimeout(window.pagesNav.gethistoryno,3e3)})),$("#warningManage").modal("hide"),this.updateHandleStatus(t),this.logFindCilck(),layer.closeAll()},goTxtSendForAlarm:function(){var e=$("#vUuid").val();$("#vidSendTxtForAlarm").val(e);var i=$("#warningCarName");$("#brandTxt").val(i.text()),$("#alarmTxt").val($("#warningType").val()),$("#startTimeTxt").val($("#warningTime").text()),$("#simcardTxt").val($("#simcard").val()),$("#deviceTxt").val($("#device").val()),$("#snoTxt").val($("#sno").val()),$("#handleTypeTxt").val("下发短信"),$("#deviceTypeTxt").val(n),$("#description-Txt").val($("#warningDescription").text()),$("#remark-Txt").val($("#alarmRemark").val());var a=$("#smsTxt").val();if(null!=a&&0!==a.length)if(a.length>512)layer.msg("下发内容不能超过512个字符");else{var t=$("#goTxtSendForAlarm");t.attr("disabled","disabled"),t.removeAttr("disabled"),$("#warningManage").modal("hide"),this.updateHandleStatus(e),this.logFindCilck()}else this.showErrorMsg("下发内容不能为空","smsTxt")},showErrorMsg:function(e,i){var n=$("#error_label");n.is(":hidden")?(n.text(e),n.insertAfter($("#"+i)),n.show()):n.is(":hidden")},takePhotoForAlarm:function(){var e=$("#goPhotographsForAlarm");if(this.photoValidateForAlarm()){var i=$("#vUuid").val();$("#vidforAlarm").val(i);var n=$("#warningCarName");$("#brandPhoto").val(n.text()),$("#alarmPhoto").val($("#warningType").val()),$("#startTimePhoto").val($("#warningTime").text()),$("#simcardPhoto").val($("#simcard").val()),$("#devicePhoto").val($("#device").val()),$("#snoPhoto").val($("#sno").val()),$("#handleTypePhoto").val("拍照"),$("#description-photo").val($("#warningDescription").text()),$("#remark-photo").val($("#alarmRemark").val()),e.attr("disabled","disabled"),$("#warningManage").modal("hide"),this.updateHandleStatus(i),this.logFindCilck()}e.removeAttr("disabled")},photoValidateForAlarm:function(){return $("#takePhotoForAlarm").validate({rules:{wayID:{required:!0},time:{required:!0,digits:!0,range:[0,65535]},command:{range:[0,10],required:!0},saveSign:{required:!0},distinguishability:{required:!0},quality:{range:[1,10],required:!0},luminance:{range:[0,255],required:!0},contrast:{range:[0,127],required:!0},saturability:{range:[0,127],required:!0},chroma:{range:[0,255],required:!0}},messages:{wayID:{required:alarmSearchChannelID},time:{required:alarmSearchIntervalTime,digits:alarmSearchIntervalError,range:alarmSearchIntervalSize},command:{range:alarmSearchPhotoSize,required:alarmSearchPhotoNull},saveSign:{required:alarmSearchSaveNull},distinguishability:{required:alarmSearchResolutionNull},quality:{range:alarmSearchMovieSize,required:alarmSearchMovieNull},luminance:{range:alarmSearchBrightnessSize,required:alarmSearchBrightnessNull},contrast:{range:alarmSearchContrastSize,required:alarmSearchContrastNull},saturability:{range:alarmSearchSaturatedSize,required:alarmSearchSaturatedNull},chroma:{range:alarmSearchColorSize,required:alarmSearchColorNull}}}).form()},listenForAlarm:function(){var e=$("#goListeningForAlarm");if(this.listenValidate()){var i=$("#vUuid").val();$("#vidforAlarmListen").val(i),$("#brandListen").val($("#warningCarName").text()),$("#alarmListen").val($("#warningType").val()),$("#startTimeListen").val($("#warningTime").text()),$("#simcardListen").val($("#simcard").val()),$("#deviceListen").val($("#device").val()),$("#snoListen").val($("#sno").val()),$("#handleTypeListen").val("监听"),$("#descriptionListen").val($("#warningDescription").text()),$("#remarkListen").val($("#alarmRemark").val()),e.attr("disabled","disabled"),$("#listeningAlarm").ajaxSubmit((function(){$("#warningManage").modal("hide"),e.removeAttr("disabled")}))}e.removeAttr("disabled")},listenValidate:function(){return $("#listeningAlarm").validate({rules:{monitorPhone:{isNewTel:!0,required:!0}},messages:{monitorPhone:{required:"请输入电话号码"}}}).form()},updateHandleStatus:function(e){$("#alarm"+e+"handle").unbind("click").text("已处理").removeAttr("style")},getFormatTime:function(e){json_ajax("POST","/clbs/v/monitoring/getTime","json",!0,null,(function(i){a=i,e()}))},layoutResize:function(){var e=this;setTimeout((function(){e.layoutChange(),e.windowResize()}),30)},windowResize:function(){$("#realtimeScalingBtn").hasClass("fa fa-chevron-down")?this.videoSeparatedAdaptShow():this.videoSeparatedAdaptHide()},checkAlarmRole:function(){json_ajax("POST","/clbs/v/monitoring/checkAlarmRole","json",!0,{},(function(e){e.success&&(t=!0)}))},specialParamSetShow:function(){$("#diskSaveModal label.error").remove(),json_ajax("POST","/clbs/realTimeVideo/video/getDiskInfo","json",!0,{},(function(e){if(e.success){var i,n=e.obj.videoPlayTime,a=e.obj.videoStopTime,t=e.obj.memoryRate,o=e.obj.memory;i=o<=60?"green":o>60||o<=90?"yellow":"red";var r=e.obj.memoryType;$("#videoPlayTime").val(n),$("#videoRequestTime").val(a),$("#ftpStorage").val(t),$("#videoMemory").text(o+"%"),$("#videoSaveState").val(o),$("#videoMemoryProgress").css({width:o+"%","background-color":i}),$("#specialParamSet input:radio[name='type'][value="+r+"]").prop("checked","true")}})),$("#diskSaveModal").modal("show")},doSubmit:function(){var e=this;e.validates()&&$("#specialParamSet").ajaxSubmit((function(i){if(null!=i){var n=$.parseJSON(i);n.success?($("#diskSaveModal").modal("hide"),e.getTimeout()):layer.msg(n.msg,{move:!1})}}))},validates:function(){return $("#specialParamSet").validate({rules:{videoPlayTime:{required:!0,digits:!0,range:[30,86400]},videoStopTime:{required:!0,digits:!0,range:[30,600]},memoryRate:{required:!0,digits:!0,range:[1,100]}},messages:{videoPlayTime:{required:"缺省时间未设置",digits:"必须是正整数哦！",range:"输入值范围为30-86400"},videoStopTime:{required:"断开时间未设置",digits:"必须是正整数哦！",range:"输入值范围为30-600"},memoryRate:{required:"FTP存储空间未设置",digits:"必须是正整数哦！",range:"输入值范围为1-100"}}}).form()},getTimeout:function(){json_ajax("POST","/clbs/realTimeVideo/video/getDiskInfo","json",!0,{},(function(e){e.success?(handleTime=1e3*Number(e.obj.videoPlayTime),videoFreeTime=1e3*Number(e.obj.videoStopTime)):(handleTime=3e5,videoFreeTime=3e4)}))}};window.logFindCilck=function(){r.logFindCilck()},window.Table={table:r}},235:function(e,i){var n,a,t,o,r,l,d,s,c,m,u,v=!1,h=!0,p="all",g="aliasesStyle",b=!0,f=new window.realTimeVideoCommon.map,w=[],y={init:function(){t=window.realTimeVideoCommon.getAddressUrl("videoId"),o=window.realTimeVideoCommon.getAddressUrl("videoName"),this.getMonitoringNumber(),this.videoScreenControlFn(),this.listenVideoScreenControlOff(),this.controlAudioVoice()},getMonitoringNumber:function(){var e=this;$("#treeLoading").show(),json_ajax("POST","/clbs/m/functionconfig/fence/bindfence/getStatistical","json",!0,{webType:2},(function(i){var r,l;if(n=i.obj.allV,a=i.obj.vehicleIdArray,t){$("#search_condition").val(o);var d=$("#searchType").val();r="/clbs/m/functionconfig/fence/bindfence/new/monitorTreeFuzzy",l={queryParam:o,queryType:d,webType:2,type:1}}else n<=300?(r="/clbs/m/functionconfig/fence/bindfence/new/monitorTree",l={webType:2}):r="/clbs/m/functionconfig/fence/bindfence/bigDataMonitorTree";e.initZtree(r,l)}))},initZtree:function(e,i){var n={async:{url:e,type:"post",enable:!0,autoParam:["id"],otherParam:i,dataType:"json",dataFilter:this.ajaxDataFilter.bind(this)},view:{dblClickExpand:!1,nameIsHTML:!0,fontCss:setFontCss_ztree,aliasesClass:g,addHoverDom:this.addHoverDom.bind(this),removeHoverDom:this.removeHoverDom.bind(this),addDiyDom:this.addDiyDom.bind(this)},check:{enable:!1},data:{simpleData:{enable:!0},key:{title:"name"}},callback:{onAsyncError:this.zTreeOnAsyncError.bind(this),beforeAsync:this.beforeAsync.bind(this),onClick:this.onClickV.bind(this),beforeDblClick:this.zTreeBeforeDblClick.bind(this),onDblClick:this.onDbClickV.bind(this),onAsyncSuccess:this.zTreeOnAsyncSuccess.bind(this),onExpand:this.zTreeOnExpand.bind(this),onRightClick:this.zTreeShowRightMenu.bind(this),onNodeCreated:this.zTreeOnNodeCreated.bind(this)}};$.fn.zTree.init($("#vTreeList"),n)},ajaxDataFilter:function(e,i,n){var a=n;return h&&(a=JSON.parse(ungzip(n))),"offline"===p&&(a=a.filter((function(e){return!("assignment"===e.type&&0===e.offLine)})),a=filterQueryResult(a,null,"assignment")),"online"!==p&&""===$("#search_condition").val()||(a=filterQueryResult(a,null)),0===a.length?($("#treeLoading span").text(v?"未找到查询对象":"您没有数据"),$("#treeLoading").show().find("i").hide()):$("#treeLoading").hide(),a},addHoverDom:function(e,i){if(-1!==["vehicle","thing","people"].indexOf(i.type)){var n=this,a=$("#"+i.tId+"_span"),t=a.hasClass("obj_select_online"),o=a.hasClass("obj_select_heartbeat");if(t||o){var r=$("#deleteBtn_"+i.id);if(r.length>0)return;r=$("<span class='button video_close_ico' id='deleteBtn_"+i.id+"' title='关闭'></span>"),$("#"+i.tId+"_span").after(r),r.on("click",(function(){n.unsubscribeLocation(i.id),window.VideoModule.video.videoCloseFun(i.id,"monitor")}))}}},removeHoverDom:function(e,i){-1!==["vehicle","thing","people"].indexOf(i.type)&&$("#deleteBtn_"+i.id).remove()},addDiyDom:function(e,i){if(-1!==["vehicle","people","thing"].indexOf(i.type)&&i.status&&3!==i.status){var n="<span><img style='height: 14px;vertical-align: top' src='"+(1===i.acc?"/clbs/resources/img/videoPrompt/accgreen.svg":"/clbs/resources/img/videoPrompt/accgray.svg")+"'></span>";$("#"+i.tId+"_a").append(n)}},zTreeOnAsyncError:function(e,i,n,a,t,o){$("#treeLoading text").text(v?"查询失败":"加载失败"),$("#treeLoading").show().find("i").hide(),v=!1},beforeAsync:function(){return b},onClickV:function(e,i,n){$.fn.zTree.getZTreeObj("vTreeList").cancelSelectedNode(n);var a=$("#"+n.tId+"_span");if(-1!==["vehicle","thing","people"].indexOf(n.type)&&($(".node_name").removeClass("obj_select"),a.addClass("obj_select"),Map.map.getCurrentMonitorId()!==n.id)){Map.map.monitorHide(Map.map.getCurrentMonitorId()),Map.map.monitorShow(n.id),Map.map.isSubscribe(n.id)&&Map.map.setCurrentMonitorId(n.id);var t=f.get(n.id);t&&window.LocationInfo.subscribeInfo.setInfo(t)}},zTreeBeforeDblClick:function(e,i){if(null!==i){if($.fn.zTree.getZTreeObj("vTreeList").cancelSelectedNode(i),-1!==["vehicle","thing","people","channel"].indexOf(i.type)){json_ajax("POST","/clbs/realTimeVideo/video/saveVideoSpotCheckRecord","json",!0,{vehicleId:"channel"===i.type?i.vehicleId:i.id});var n="channel"===i.type?i.parentTId:i.tId,a=$("#"+n+"_ico").attr("class");if(null!=a&&-1===a.indexOf("vehicleSkin")&&-1===a.indexOf("peopleSkin")&&-1===a.indexOf("icon-offline"))return!0;json_ajax("POST","/clbs/realTimeVideo/video/saveVideoInspectionRecord","json",!0,{vehicleId:"channel"===i.type?i.vehicleId:i.id,playStatus:1,failReason:1})}return layer.msg("监控对象离线"),!1}},onDbClickV:function(e,i,n){var a=$.fn.zTree.getZTreeObj("vTreeList"),t=-1!==["vehicle","thing","people"].indexOf(n.type),o=t?n.tId:n.parentTId,r=t?n.id:n.vehicleId,d=$("#"+o+"_span"),s=d.hasClass("obj_select_online"),c=d.hasClass("obj_select_heartbeat");if($(".node_name").removeClass("obj_select"),d.addClass("obj_select"),l=n.deviceType,!s&&!c){var m=a.getNodesByParam("id",r,null);if(m)for(var u=0;u<m.length;u+=1){var v=m[u];$("#"+v.tId+"_span").addClass("obj_select_online")}}if("channel"!==n.type){for(u=0;u<w.length;u+=1)w[u]!==r&&this.cancelSubscribe(w[u]);w=[]}-1===w.indexOf(r)&&w.push(r),Map.map.getCurrentMonitorId()!==r&&(Map.map.monitorHide(Map.map.getCurrentMonitorId()),Map.map.monitorShow(r),Map.map.setCurrentMonitorId(r)),this.subscribeLocation(n),this.getMonitorChannel(n)},zTreeOnAsyncSuccess:function(){var e=$.fn.zTree.getZTreeObj("vTreeList"),i=e.transformToArray(e.getNodes());if(i.length>0&&$("#treeLoading").hide(),b=!1,v=!1,"online"!==p&&"search"!==p||this.expandNodes(e,i),this.alarmJump(),this.reloadMonitorStatus(),t){this.expandNodes(e,i);var n=e.getNodeByParam("id",t,null);null!=n&&(t=null,o=null,this.onDbClickV(null,null,n))}},reloadMonitorStatus:function(){var e=Map.map.getSubscribeInfoMap().keys(),i=$.fn.zTree.getZTreeObj("vTreeList");for(let t=0;t<e.length;t+=1){var n=i.getNodesByParam("id",e[t],null);for(let e=0;e<n.length;e+=1){var a=n[e];$("#"+a.tId+"_span").addClass("obj_select_online")}}},expandNodes:function(e,i){for(var n=0;n<i.length;n+=1){var a=i[n];"assignment"===a.type&&a.children&&e.expandNode(a,!0,!1,!1,!0)}},zTreeOnExpand:function(e,i,n){var a=this;if("assignment"===n.type)if(void 0===n.children){var t={assignmentId:n.id,isChecked:!0,monitorType:"monitor",webType:2};json_ajax("POST","/clbs/m/functionconfig/fence/bindfence/new/putMonitorByAssign","json",!0,t,(function(e){a.addNodes(e,n,!1);var i=n.children.map((function(e){return{vehicleID:e.id}}));a.subscribeStatus(i)}))}else{var o=n.children.map((function(e){return{vehicleID:e.id}}));this.subscribeStatus(o)}else-1!==["vehicle","thing","people"].indexOf(n.type)&&void 0===n.children&&(t={vehicleId:n.id,isChecked:!1},json_ajax("POST","/clbs/realTimeVideo/video/getChannels","json",!0,t,(function(e){a.addNodes(e,n,!1),a.updateChannelStatus(n.id)})))},addNodes:function(e,i,n){$.fn.zTree.getZTreeObj("vTreeList").addNodes(i,JSON.parse(ungzip(e.msg)),n)},updateChannelStatus:function(e){for(var i=$.fn.zTree.getZTreeObj("vTreeList"),n=i.getNodesByParam("id",e,null),a=window.VideoModule.video.getSubscribeVideoModule(),t=0;t<n.length;t+=1){var o=n[t].children;if(o)for(var r=0;r<o.length;r++){var l=e+"-"+o[r].logicChannel;a.has(l)&&(o[r].iconSkin="btnImage channel-subscribe",i.updateNode(o[r]))}}},subscribeStatus:function(e){var i={desc:{MsgId:40964,UserName:$("#userName").text()},data:e};webSocket.subscribe(headers,"/user/topic/cachestatus",this.subscribeStatusCallback.bind(this),"/app/vehicle/subscribeCacheStatusNew",i)},subscribeStatusCallback:function(e){var i=$.fn.zTree.getZTreeObj("vTreeList"),n=$.parseJSON(e.body);if(39321===n.desc.msgID)for(var a=n.data,t=0;t<a.length;t+=1){var o=a[t];if(d=i.getNodesByParam("id",o.vehicleId,null))for(var r=0;r<d.length;r+=1){var l=d[r];this.updateTreeDom(i,l,o.vehicleStatus)}}else if(34952===n.desc.msgID||30583===n.desc.msgID){var d;a=n.data;if(d=i.getNodesByParam("id",a[0].vehicleId,null))for(t=0;t<d.length;t+=1){l=d[t];this.updateTreeDom(i,l,a[0].vehicleStatus)}}},updateTreeDom:function(e,i,n){-1!==["vehicle","thing","people"].indexOf(i.type)&&(i.iconSkin=3===n?"btnImage icon-offline":11===n?"btnImage icon-heartbeat":"icon-online",e.updateNode(i))},zTreeShowRightMenu:function(e,i,n){if(n){var a=this;if(-1!==["vehicle","thing","people"].indexOf(n.type)&&($("#realTimeVideo-rMenu").css("width","143px"),"vehicleSkin"!==n.iconSkin)){var t;t=-1!==$("#"+n.tId+"_ico").attr("class").indexOf("icon-online")?"在线":"心跳";var o,r,l,d=$("#userName").text();if(!n.children){var s={vehicleId:n.id,isChecked:!1};json_ajax("POST","/clbs/realTimeVideo/video/getChannels","json",!1,s,(function(e){a.addNodes(e,n,!0),a.updateChannelStatus(n.id)}))}for(var c=0;c<n.children.length;c++)if(1===n.children[c].channelType){r=n.children[c].logicChannel,l=n.children[c].streamType,o=1;break}var m={vehicleId:n.id,clientX:e.clientX,clientY:e.clientY,status:t,monitorName:n.name,channelNum:r,simcardNumber:n.simcardNumber,userName:d,plateColor:n.plateColor,channelNumType:o,streamType:l,deviceType:n.deviceType,acc:n.acc,status:n.status};this.createMenu(m)}}},createMenu:function(e){var i=e.monitorName;i&&(i=encodeURI(i));var n='<div class="col-md-12" id="treeRightMenu-l" style="padding:0">';e.channelNum?n+='<a href="/clbs/realTimeVideo/video/talkBackPage?brand='+i+"&vehicleId="+e.vehicleId+"&mobile="+e.simcardNumber+"&streamType="+e.streamType+"&channelNumber="+e.channelNum+"&vehicleColor="+e.plateColor+"&channelNumType="+e.channelNumType+'" data-toggle="modal" data-target="#commonSmWin">对讲</a>':n+='<a href="javascript:void(0)" onClick="layer.msg(\'当前监控对象没有音频通道号，请在设置通道号指令里设置音频类型的通道并下发 \')">对讲</a>',n+='<a id="monitorListening">监听</a>',n+='<a href="/clbs/realTimeVideo/video/broadCastPage" data-toggle="modal" data-target="#commonSmWin">广播</a>',3!==e.status&&0===e.acc&&(n+='<a id="monitorWakeup">唤醒</a>'),n+='<a href="/clbs/v/monitoring/getSendTextByBatchPage_'+e.deviceType+'" data-toggle="modal" data-target="#commonSmWin">批量文本信息下发</a>',n+='<a id="settingChannelLink" data-type="'+e.deviceType+'" href="/clbs/realTimeVideo/video/channelSettingPage?vehicleId='+e.vehicleId+"&brand="+i+'" data-toggle="modal" data-target="#commonWin">设置通道号</a>',n+='<a id="videoProperties">查询音视频属性</a>',"23"!==e.deviceType&&(n+='<a href="/clbs/realTimeVideo/video/vedioSleepSettingPage?vehicleId='+e.vehicleId+"&brand="+i+'" data-toggle="modal" data-target="#commonWin">设置休眠唤醒</a>'),"心跳"===e.type&&"23"!==e.deviceType?n+='<p id="videoSleepBtn"><a>休眠唤醒</a></p></div>':n+="</div>",$("#realTimeVideo-rMenu").html(n),this.menuBindFn(e),window.currentRightClickVehicleId=e.vehicleId,this.rMenuUlShowOrPosition(e.clientX,e.clientY)},menuBindFn:function(e){var i=this;$("#monitorListening").unbind("click").bind("click",(function(){i.rightClickMonitorFn(e)})),$("#videoProperties").unbind("click").bind("click",(function(){i.searchAudioAndVideoDataFn(e.vehicleId)})),$("#videoSleepBtn").unbind("click").bind("click",(function(){i.videoSleep(e.vehicleId,e.monitorName)})),$("#monitorWakeup").unbind("click").bind("click",(function(){i.monitorWakeupFn(e.vehicleId)}))},rightClickMonitorFn:function(e){var i=this;if(e.channelNum){$("#realTimeVideo-rMenu").css({visibility:"hidden"});var n={mobile:e.simcardNumber,channelNum:e.channelNum,vehicleId:e.vehicleId,channelType:e.channelNumType,brand:e.monitorName,vehicleColor:e.plateColor,streamType:e.streamType};json_ajax("POST","/clbs/v/monitoring/audioAndVideoParameters/"+e.vehicleId,"json",!0,null,(function(e){e.success&&i.listeningSuccess(e.obj,n)}))}else layer.msg("当前监控对象没有音频通道号，请在设置通道号指令里设置音频类型的通道并下发！")},listeningSuccess:function(e,i){$("#rightClickMonitor").removeClass("hidden"),$("#monitorIco").removeAttr("class"),$("#monitorIco").addClass("monitor-success"),Table.table.logFindCilck(),this.audioListening(e,i)},audioListening:function(e,i){var n=this,a=i.mobile.length,t=i.mobile;if(a<12)for(var o=0;o<12-a;o++)t="0"+t;var r="ws://";"https:"===document.location.protocol&&(r="wss://");var l=r+videoRequestUrl+":"+audioRequestPort+"/"+t+"/"+i.channelNum+"/2",d={vehicleId:i.vehicleId,simcardNumber:t,channelNumber:i.channelNum,sampleRate:e.samplingRateStr||8e3,channelCount:e.vocalTractStr||0,audioFormat:e.audioFormatStr,playType:"UP_WAY",dataType:3,userID:e.userUuid,deviceID:e.deviceId,streamType:1,deviceType:e.deviceType};c=new RTPMediaPlayer({url:l,type:"UP_WAY",audioEnabled:!0,videoEnabled:!1,recordEnabled:!1,data:d,onMessage:function(e,i){var n=JSON.parse(i);-1005!=n.data.msgBody.code&&-1008!=n.data.msgBody.code&&-1006!=n.data.msgBody.code&&-1004!=n.data.msgBody.code||layer.msg(n.data.msgBody.msg)},socketOpenFun:function(e,i){var n={vehicleId:e.vehicleId,simcardNumber:e.simcardNumber,channelNumber:JSON.stringify(e.channelNumber),sampleRate:JSON.stringify(e.sampleRate),channelCount:JSON.stringify(e.channelCount),audioFormat:e.audioFormat,playType:e.playType,dataType:JSON.stringify(e.dataType),userID:e.userID,deviceID:e.deviceID,streamType:JSON.stringify(e.streamType),deviceType:e.deviceType};i.play(n)},openAudioSuccess:function(){n.monitorAudioSuccess()},socketCloseFun:function(e){$("#monitorIco").addClass("monitor-success"),n.listenBtnClick()}}),$("#monitorIco").unbind("click").bind("click",(function(){n.listenBtnClick()}))},monitorAudioSuccess:function(){$("#rightClickMonitor").addClass("audio-listen"),$("#monitorIco").attr("src","../../resources/img/pause.png"),d=1,s=setInterval((function(){$("#monitorText").html("正在监听 时间："+d+++"秒")}),1e3)},listenBtnClick:function(){$("#monitorIco").hasClass("monitor-success")&&($("#rightClickMonitor").removeClass("audio-listen"),c&&(c.closeSocket(),c.cmdCloseVideo()),clearInterval(s),$("#monitorText").html("连接中..."),d=1,$("#rightClickMonitor").addClass("hidden"),$("#monitorIco").removeClass("monitor-success"),Table.table.logFindCilck())},zTreeOnNodeCreated:function(e,i,n){},alarmJump:function(){var e=window.realTimeVideoCommon.getAddressUrl("vid"),i=window.realTimeVideoCommon.getAddressUrl("pid");if(e&&i){var n={id:e,pid:i};this.subscribeLocation(n)}},subscribeLocation:function(e){var i={desc:{MsgId:40964,UserName:$("#userName").text()},data:[e.vehicleId?e.vehicleId:e.id]};if(webSocket.subscribe(headers,"/user/topic/location",this.locationCallback.bind(this),"/app/location/subscribe",i),!e.iconSkin){var n=$.fn.zTree.getZTreeObj("vTreeList"),a=n.getNodeByParam("id",e.pid,null);n.expandNode(a,!0,!1,!1,!0),this.alarmGetZtreeDom(e.id)}},locationCallback:function(e){var i=JSON.parse(e.body);"neverOnline"!==i.desc&&(Map.map.getCurrentMonitorId()===i.data.msgBody.monitorInfo.monitorId&&window.LocationInfo.subscribeInfo.setInfo(i),f.set(i.data.msgBody.monitorInfo.monitorId,i),Map.map.setMarkersData(i))},alarmGetZtreeDom:function(e){var i=$.fn.zTree.getZTreeObj("vTreeList").getNodeByParam("id",e,null);null!=i?this.onDbClickV(null,null,i):console.error("err：监控对象树节点未获取")},ztreeReload:function(e){$("#treeLoading span").text("加载中，请稍候"),$("#treeLoading").show().find("i").show(),v=!1,$("#search_condition").val("");var i,a=e.data.type,t=null;7===a?(h=!0,n<=300?(i="/clbs/m/basicinfo/monitoring/vehicle/new/treeStateInfo",t={webType:2,type:a}):i="/clbs/m/functionconfig/fence/bindfence/bigDataMonitorTree",p="offline"):1!==a&&9!==a||(h=!1,i="/clbs/m/basicinfo/monitoring/vehicle/new/treeStateInfo",t={webType:2,type:a},p="online"),b=!0,this.initZtree(i,t)},fuzzySearch:function(){v=!0,$("#treeLoading span").text("正在查询，请稍候"),$("#treeLoading").show().find("i").show();var e,i,a=$("#search_condition").val();h=!0,b=!0;var t=$("#searchType").val();""!==a?(e="/clbs/m/functionconfig/fence/bindfence/new/monitorTreeFuzzy",i={queryParam:a,queryType:t,webType:2,type:1}):n<=300?(e="/clbs/m/functionconfig/fence/bindfence/new/monitorTree",i={webType:2}):e="/clbs/m/functionconfig/fence/bindfence/bigDataMonitorTree",p="search",this.initZtree(e,i)},debounce:function(){var e=this;r&&clearTimeout(r),r=setTimeout((function(){e.fuzzySearch()}),500)},refreshTree:function(){var e;v=!0,$("#treeLoading span").text("加载中，请稍候"),$("#treeLoading").show().find("i").show(),$("#search_condition").val("");var i=null;h=!0,b=!0,n<=300?(e="/clbs/m/functionconfig/fence/bindfence/new/monitorTree",i={webType:2}):e="/clbs/m/functionconfig/fence/bindfence/bigDataMonitorTree",p="all",this.initZtree(e,i)},showAliases:function(){$("#videoTreeShowAliases input").is(":checked")?($(".aliasesStyle").show(),g="aliasesStyle aliasesShow"):($(".aliasesStyle").hide(),g="aliasesStyle")},getUserMonitorIds:function(){return a},searchAudioAndVideoDataFn:function(e){$("#realTimeVideo-rMenu").css({visibility:"hidden"});json_ajax("POST","/clbs/realTimeVideo/video/sendParamCommand","json",!0,{vehicleId:e,orderType:8},(function(e){e.success&&Table.table.logFindCilck()}))},videoSleep:function(e,i){json_ajax("POST","/clbs/realTimeVideo/videoSetting/getVideoSleepParam","json",!0,{vehicleId:e},(function(n){null!=n.obj&&1===n.obj.wakeupHandSign?($("#videoSleepBtn").html('<a href="/clbs/realTimeVideo/video/vedioSleepPage?brand='+i+"&vehicleId="+e+'" data-toggle="modal" data-target="#commonSmWin">休眠唤醒</a>'),setTimeout((function(){$("#videoSleepBtn a").click()}),200)):layer.msg("请在设置休眠唤醒指令里启用手动唤醒并下发")}))},rMenuUlShowOrPosition:function(e,i){$("#realTimeVideo-rMenu ul").show(),(i-=40)<0?$("#realTimeVideo-rMenu").css({top:i-i+"px",left:e+35+"px",visibility:"visible"}):$("#realTimeVideo-rMenu").css({top:i+"px",left:e+35+"px",visibility:"visible"})},cloudStationFn:function(){Map.map.getCurrentMonitorId()?$("#video-module div").hasClass("this-click")?1===$("#connectState").attr("value")?$(this).hasClass("video-yun-sett")?($(this).removeClass("video-yun-sett").addClass("video-yun-sett-check"),$("#haeundaeModal").modal("show"),$("#haeundaeModal>.modal-dialog").css("width","500px"),$("#haeundaeModal .modal-dialog").css("top",($(window).height()-308)/2+"px")):$(this).removeClass("video-yun-sett-check").addClass("video-yun-sett"):layer.msg("该通道号云台未连接"):layer.msg("请先选中一个音视频窗口"):layer.msg("请双击订阅监控对象")},videoDimmingFn:function(){if(Map.map.getCurrentMonitorId()){var e=$("#videoDimming");e.hasClass("video-dimming")?(e.removeClass("video-dimming"),e.addClass("video-dimming-check"),$("#videoScreenControl").modal("show"),$("#videoScreenControl .modal-dialog").css("top",($(window).height()-268)/2+"px")):(e.removeClass("video-dimming-check"),e.addClass("video-dimming"))}else layer.msg("请双击订阅监控对象")},videoScreenControlFn:function(){var e=this;$(".nsBrightness").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(i,n){$("#brightnessVal").val(n),e.doVideoScreenControl()}}),$(".nsChroma").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(i,n){$("#chromaVal").val(n),e.doVideoScreenControl()}}),$(".nsContrast").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(i,n){$("#contrastVal").val(n),e.doVideoScreenControl()}}),$(".nsSaturation").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(i,n){$("#saturationVal").val(n),e.doVideoScreenControl()}}),$(".nsVolume").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(e,i){$("#volumeVal").val(i);for(var n=window.VideoModule.video.getSubscribeVideoModule(),a=n.keys(),t=0;t<a.length;t++){n.get(a[t]).mediaPlayer.setAudioVoice(i/100)}}})},listenVideoScreenControlOff:function(){$("#videoScreenControl").on("hidden.bs.modal",(function(){var e=$("#videoDimming");e.removeClass("video-dimming-check"),e.addClass("video-dimming")}))},controlAudioVoice:function(){$(".audioVoice").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(e,i){var n=i/100;c&&c.setAudioVoice(n)}})},doVideoScreenControl:function(){var e="saturate("+$("#saturationVal").val()/51+") hue-rotate("+$("#chromaVal").val()+"deg) brightness("+$("#brightnessVal").val()/255+") contrast("+$("#contrastVal").val()/51+")",i=$("video");i.css("-webkit-filter",e),i.css("-ms-filter",e),i.css("-moz-filter",e),i.css("-o-filter",e),i.css("filter",e)},cloudStationCloseFn:function(){$("#videoYunSett").removeClass("video-yun-sett-check").addClass("video-yun-sett"),$("#haeundaeModal").modal("hide")},haeundaeLightCheckedFn:function(){var e;$(this).is(":checked")?(layer.msg("灯光开启"),e=1):(layer.msg("灯光关闭"),e=0);var i=m,n=Map.map.getCurrentMonitorId();json_ajax("post","/clbs/cloudTerrace/sendParam","json",!0,{vehicleId:n,channelNum:i,type:4,control:e},(function(e){e.success&&Table.table.logFindCilck()}))},haeundaeWipersCheckedFn:function(){var e;$(this).is(":checked")?(layer.msg("雨刷开启"),e=1):(layer.msg("雨刷关闭"),e=0);var i=m,n=Map.map.getCurrentMonitorId();json_ajax("post","/clbs/cloudTerrace/sendParam","json",!1,{vehicleId:n,channelNum:i,type:3,control:e},(function(e){e.success&&Table.table.logFindCilck()}))},zoomDoubleApertureFn:function(){var e,i,n=$(this).attr("id");if("zoomPlus"===n?(layer.msg("变焦 加"),i=1,e=0):"zoomLess"===n?(layer.msg("变焦 减"),i=1,e=1):"doublePlus"===n?(layer.msg("变倍 加"),i=5,e=0):"doubleLess"===n?(layer.msg("变倍 减"),i=5,e=1):"aperturePlus"===n?(layer.msg("光圈  加"),i=2,e=0):"apertureLess"===n&&(layer.msg("光圈 减"),i=2,e=1),void 0!==i&&void 0!==e){var a=m,t=Map.map.getCurrentMonitorId();json_ajax("post","/clbs/cloudTerrace/sendParam","json",!1,{vehicleId:t,channelNum:a,type:i,control:e},(function(e){e.success&&Table.table.logFindCilck()}))}},haeundaeCameraPathFn:function(){var e=[],i=$(this).attr("id");if("haeundaeLeftTop"===i?e=[1,3]:"haeundaeTop"===i?e=[1]:"haeundaeRightTop"===i?e=[1,4]:"haeundaeLeft"===i?e=[3]:"haeundaeCenter"===i?e=[0]:"haeundaeRight"===i?e=[4]:"haeundaeLeftBottom"===i?e=[2,3]:"haeundaeBottom"===i?e=[2]:"haeundaeRightBottom"===i&&(e=[2,4]),e.length>0)for(var n=u,a=m,t=Map.map.getCurrentMonitorId(),o=0;o<e.length;o++){var r=e[o];json_ajax("post","/clbs/cloudTerrace/sendParam","json",!1,{vehicleId:t,channelNum:a,type:0,speed:n,control:r},(function(e){e.success&&Table.table.logFindCilck()}))}},cloudSilderValueFn:function(e){u=e},getMonitorChannel:function(e){var i=this;if("channel"!==e.type)if(e.children)window.VideoModule.video.subscribeVideoChannel(e);else{var n={vehicleId:e.id,isChecked:!1};json_ajax("POST","/clbs/realTimeVideo/video/getChannels","json",!0,n,(function(n){i.addNodes(n,e,!0),window.VideoModule.video.subscribeVideoChannel(e)}))}else window.VideoModule.video.subscribeVideoChannel(e)},unsubscribeLocation:function(e){var i={desc:{MsgId:40964,UserName:$("#userName").text()},data:[e]};webSocket.send("/app/location/unsubscribe",headers,i),f.remove(e),Map.map.getCurrentMonitorId()===e&&window.LocationInfo.subscribeInfo.setInfo(),Map.map.clearData(e),this.recoverMonitorNode(e)},recoverMonitorNode:function(e){var i=$.fn.zTree.getZTreeObj("vTreeList").getNodesByParam("id",e,null);for(let e=0;e<i.length;e+=1)$("#"+i[e].tId+"_span").attr("class","node_name")},recoverChannelNode:function(e,i){var n=$.fn.zTree.getZTreeObj("vTreeList"),a=n.getNodesByParam("id",e,null);for(let e=0;e<a.length;e+=1){var t=a[e];if(t.children)for(let e=0;e<t.children.length;e+=1){var o=t.children[e];i===o.logicChannel&&(o.iconSkin="channelSkin",n.updateNode(o))}}},setHaeundaeChannelNum:function(e){m=e},getSelectNodeProtocol:function(){return l},setVideoModule:function(e){e},monitorWakeupFn:function(e){$("#wakeupModal").modal("show"),$("#wakeupMonitorId").val(e),$("#realTimeVideo-rMenu").css({visibility:"hidden"})},wakeupSubmitFn:function(){if(this.wakeupValidate()){var e=$("#wakeupTime").val(),i=$("#wakeupMonitorId").val(),n={desc:{UserName:$("#userName").text()},data:{monitorId:i,wakeUpDuration:e}};webSocket.subscribe(headers,"/user/topic/device/wakeUp",this.wakeupCallback.bind(this),"/app/device/wakeUp",n),this.wakeupCloseFn()}},wakeupValidate:function(){return $("#wakeupForm").validate({rules:{wakeupTime:{required:!0,range:[0,1e3]}},messages:{wakeupTime:{required:"请输入唤醒时间",range:"可输入范围是：0-1000"}}}).form()},wakeupCloseFn:function(){$("#wakeupModal").modal("hide"),$("#wakeupTime").val(10)},wakeupCallback:function(e){layer.msg("0"===e.body?"唤醒成功":"唤醒失败")},cancelSubscribe:function(e){this.unsubscribeLocation(e),window.VideoModule.video.videoCloseFun(e,"monitor")}};window.getGroupList=function(e,i){y.addNodes(e,i,!1),y.updateChannelStatus(i.id)},window.Tree={tree:y}},236:function(e,i){var n,a,t=new window.realTimeVideoCommon.map,o=null,r={init:function(){layer.msg("请选择监控对象",{time:0,zIndex:9}),this.getTimeout(),this.renderVideoWindow(4)},subscribeVideoChannel:function(e){var i,n,a,o=this,r=[],l=0;if("channel"===e.type){var d=(i=e.vehicleId)+"-"+e.logicChannel;1!==e.channelType&&(l++,t.has(d)||r.push({channelNumber:e.logicChannel,streamType:e.streamType,channelType:e.channelType,vehicleId:i}));var s=$.fn.zTree.getZTreeObj("vTreeList").getNodeByParam("id",e.pId,null);n=s.simcardNumber,a=s.name}else{i=e.id,n=e.simcardNumber,a=e.name;for(var c=e.children,m=0;m<c.length;m+=1){d=i+"-"+c[m].logicChannel;1!==c[m].channelType&&(l++,t.has(d)||r.push({channelNumber:c[m].logicChannel,streamType:c[m].streamType,channelType:c[m].channelType,vehicleId:i}))}}return"channel"!==e.type&&0===e.children.length?(layer.msg(a+" 未设置通道号"),!1):0===l?(layer.msg("请设置或双击音视频/视频类型通道号"),!1):void(r.length>0&&(o.openVideoArea(r.length),json_ajax("POST","/clbs/v/monitoring/audioAndVideoParameters/"+i,"json",!0,null,(function(e){if(e.success){var a=e.obj;o.connectVideoFlow(r,n,i,a)}}))))},connectVideoFlow:function(e,i,n,a){$(".window h4").html(""),layer.closeAll();var o=this,r="ws://";$("#userId").val();"https:"===document.location.protocol&&(r="wss://");for(var l=0;l<e.length;l++){var d,s=e[l],c=s.vehicleId;$("#video-module video").each((function(){if("true"!==$(this).attr("data-channel-up"))return d=this.id,!1})),this.videoMessage("视频请求中...",d);var m={vehicleId:c,channelNum:s.channelNumber,channelType:s.channelType,mobile:i,streamType:s.streamType,domId:d,sampleRate:a.samplingRateStr||8e3,channelCount:a.vocalTractStr||0,audioFormat:a.audioFormatStr,playType:"REAL_TIME",dataType:"0",userID:a.userUuid,deviceID:a.deviceId,deviceType:a.deviceType};$("#"+d).attr("data-channel-up","true");var u=r+videoRequestUrl+":"+videoRequestPort+"/"+i+"/"+s.channelNumber+"/0",v=new RTPMediaPlayer({domId:d,url:u,data:m,onMessage:function(e,i){o.videoPlayErrorFn(e,i)},socketOpenFun:function(e,i){var n={vehicleId:e.vehicleId,simcardNumber:e.mobile,channelNumber:JSON.stringify(e.channelNum),sampleRate:JSON.stringify(e.sampleRate),channelCount:JSON.stringify(e.channelCount),audioFormat:e.audioFormat,playType:e.playType,dataType:JSON.stringify(e.dataType),userID:e.userID,deviceID:e.deviceID,streamType:JSON.stringify(e.streamType),deviceType:e.deviceType};i.play(n)},onPlaying:function(e,i){$("#msg_"+e.domId).html(""),o.updateWaitTime(),o.videoPlaySuccess(e,i)},socketCloseFun:function(e){o.videoCloseSuccess(e)}}),h=c+"-"+s.channelNumber;t.has(h)||t.set(h,{data:m,playing:!1,mediaPlayer:v})}window.Tree.tree.updateChannelStatus(n)},videoPlayErrorFn:function(e,i){var n=JSON.parse(i).data.msgBody.code;0!==n&&json_ajax("POST","/clbs/realTimeVideo/video/saveVideoInspectionRecord","json",!0,{vehicleId:e.vehicleId,channelNumber:e.channelNum,playStatus:1001===n?0:1,failReason:1001!==n?3:null});var a=e.domId;-1004===n?(layer.msg("终端未响应，请重新订阅"),this.videoMessage("终端未响应",a)):-1005===n?this.videoMessage("无音视频内容",a):-1006===n&&this.videoMessage("加载失败",a)},videoMessage:function(e,i){var n="msg_"+i;if(0==$("#"+n).length){var a=$("#"+i).parent(),t=document.createElement("h4");t.id=n,$(t).css({position:"absolute",bottom:10,left:"50%",width:"130px",margin:"0 0 0 -65px","text-align":"center","font-weight":"bold"}),$(t).html(e),a.append(t)}else $("#"+n).html(e)},videoPlaySuccess:function(e,i){var n,a=e.vehicleId,o=e.channelNum,r=e.channelType,l=e.domId,d=a+"-"+o;if(t.has(d)){var s=t.get(d);s.playing=!0,s.mediaPlayer=i}for(var c=$.fn.zTree.getZTreeObj("vTreeList").getNodesByParam("id",a,null),m=0;m<c.length;m+=1){var u=c[m];if(u.children)for(var v=0;v<u.children.length;v+=1){var h=u.children[v];if(h.logicChannel===o){n=h.connectionFlag;break}}}$("#"+l).attr("vehicle-id",a).attr("channel-num",o).attr("channel-type",r).attr("connection-state",n),$("#"+l).parent().append('<div class="video-modal '+a+'"></div>'),$(".video-modal").off("click").on("click",this.videoModuleClickFn),$(".video-modal").off("dblclick").on("dblclick",this.videoFullShow),$(".video-modal").off("contextmenu").on("contextmenu",this.videoRightFun),window.Table.table.logFindCilck()},videoModuleClickFn:function(){$("#video-module").find("div").removeClass("this-click"),$(this).addClass("this-click");var e=$(this).siblings("video").attr("channel-num"),i=$(this).siblings("video").attr("connection-state");window.Tree.tree.setHaeundaeChannelNum(e);var n=$.fn.zTree.getZTreeObj("vTreeList"),a=$(this).siblings("video").attr("vehicle-id"),t=n.getNodeByParam("id",a,null);$("#haeundaeBrand").text(t.name+"-"+e),$("#connectState").attr("value",i),r.openChannelVoice(a,e)},openChannelVoice:function(e,i){o&&(t.has(o)&&t.get(o).mediaPlayer.closeVideoVoice());var n=e+"-"+i;t.has(n)&&(t.get(n).mediaPlayer.openVideoVoice(),o=n)},videoFullShow:function(){$(this).parent("div").hasClass("full-video")?$(this).parent("div").removeClass("full-video"):$(this).parent("div").addClass("full-video")},videoRightFun:function(e){var i=$(this).siblings("video").attr("id"),n=e.clientY,a=e.clientX,t=$("#"+i).attr("vehicle-id");if(""!==t){$("#videoMenu li").show(),"23"===window.Tree.tree.getSelectNodeProtocol()&&($("#mainCodeStream").hide(),$("#subcodeFlow").hide());var o=$("#"+i).attr("channel-num"),r=$("#"+i).attr("channel-type");$("#videoVehicleId").val(t),$("#videoChannelNum").val(o),$("#videoChannelType").val(r),$("#videoDomId").val(i),$("#scaleRight").css("opacity",0),$("#videoMenu").css({top:n+"px",left:a+"px",display:"block"})}e.preventDefault()},videoCloseSuccess:function(e){var i=e.domId,n=e.vehicleId,a=e.channelNum,o=n+"-"+a;t.remove(o),0===t.keys().length&&layer.msg("请选择监控对象",{time:0,zIndex:9});$("#"+i).parent("div").removeClass("full-video"),$("#"+i).siblings("div.video-modal").remove();var r=$("#"+i).attr("style");r&&-1===r.indexOf("video4.png")&&-1===r.indexOf("video7.png")&&-1===r.indexOf("video7.png")&&$("#"+i).replaceWith('<video id="'+i+'" width="100%" height="100%"></video>'),window.Table.table.logFindCilck(),window.Tree.tree.recoverChannelNode(n,a)},getTimeout:function(){json_ajax("POST","/clbs/realTimeVideo/video/getDiskInfo","json",!0,{},(function(e){e.success?(handleTime=1e3*Number(e.obj.videoPlayTime),videoFreeTime=1e3*Number(e.obj.videoStopTime)):(handleTime=3e5,videoFreeTime=3e4)}))},updateWaitTime:function(){var e=this;if(clearTimeout(n),0===t.size())return!1;n=setTimeout((function(){if(0===t.size())return!1;var i,n=!1,a=handleTime/1e3;layer.confirm("您已"+a+"秒无任何操作，是否继续查看音视频？",{title:"提示",btn:["YES，继续看",'NO，关闭 (<span id="timeUpdate">30</span>)'],btnAlign:"c",fixed:!1,success:function(){var e=30;i=setInterval((function(){e-=1,$("#timeUpdate").text(e),0===e&&layer.closeAll()}),1e3)},yes:function(){n=!0,clearInterval(i),e.updateWaitTime(),layer.closeAll()},cancel:function(){clearInterval(i),e.clearAllVideo5Min()},end:function(){n||(clearInterval(i),e.clearAllVideo5Min())}})}),handleTime)},clearAllVideo5Min:function(){for(var e=t.keys(),i=0;i<e.length;i+=1){var n=t.get(e[i]);n.mediaPlayer&&(n.mediaPlayer.cmdCloseVideo(),n.mediaPlayer.closeSocket())}},getSubscribeVideoModule:function(){return t},renderVideoWindow:function(e){var i=e,n=$("#multiWindowContainer"),a=n.find(".window"),t=a.length,o=i>16?16:i;if(a.each((function(e,i){var n=i.className,a="window videoWindow-"+o.toString();n.indexOf("disabled")>-1&&(a+=" disabled"),i.className=a})),t>=i)for(var r=t-1;r>=i;r--)$(a[r]).remove();else for(var l=t;l<i;l++){var d=$('<div class="window videoWindow-'+o.toString()+'"></div>'),s=$('<video autoplay id="videoSource_'+l+'" width="100%" height="100%"></video>');d.append(s),n.append(d)}var c=$("#window-"+o);c.hasClass("active")||(c.siblings().removeClass("active"),c.addClass("active"))},openVideoArea:function(e){var i=t.size()+e;i<=4?this.renderVideoWindow(4):i>4&&i<=6?this.renderVideoWindow(6):i>6&&i<=9?this.renderVideoWindow(9):i>9&&i<=10?this.renderVideoWindow(10):i>10&&i<=16?this.renderVideoWindow(16):i>16&&this.renderVideoWindow(i)},videoSeparatedFn:function(){var e=$(this).attr("data-num");e&&r.renderVideoWindow(parseInt(e))},videoCloseFun:function(e,i,n){if($(".window h4").html(""),"monitor"===i){var a=$.fn.zTree.getZTreeObj("vTreeList").getNodesByParam("id",e,null);if(a.length>0)for(var o=0;o<a.length;o+=1){var r=a[o].children;if(r)for(let i=0;i<r.length;i+=1){var l=e+"-"+r[i].logicChannel;if(t.has(l))(s=t.get(l)).mediaPlayer&&(s.mediaPlayer.cmdCloseVideo(),s.mediaPlayer.closeSocket()),t.remove(l)}else{var d=t.keys();for(let i=0;i<d.length;i+=1){if(-1!==d[i].indexOf(e))(s=t.get(d[i])).mediaPlayer&&(s.mediaPlayer.cmdCloseVideo(),s.mediaPlayer.closeSocket()),t.remove(d[i])}}}else{d=t.keys();for(let i=0;i<d.length;i+=1){if(-1!==d[i].indexOf(e))(s=t.get(d[i])).mediaPlayer&&(s.mediaPlayer.cmdCloseVideo(),s.mediaPlayer.closeSocket()),t.remove(d[i])}}}else if("channel"===i){l=e+"-"+n;if(t.has(l))(s=t.get(l)).mediaPlayer&&(s.mediaPlayer.cmdCloseVideo(),s.mediaPlayer.closeSocket()),t.remove(l)}else for(d=t.keys(),o=0;o<d.length;o+=1){var s;(s=t.get(d[o])).mediaPlayer&&(s.mediaPlayer.cmdCloseVideo(),s.mediaPlayer.closeSocket()),t.remove(d[o])}$("#videoMenu").hide()},singleVideoClose:function(){var e=$("#videoVehicleId").val(),i=$("#videoChannelNum").val();this.videoCloseFun(e,"channel",i)},mainCodeStreamFun:function(){var e=$("#videoVehicleId").val(),i=$("#videoChannelNum").val(),n=($("#videoChannelType").val(),e+"-"+i);t.has(n)&&t.get(n).mediaPlayer.cmdSwitchStream("0");$("#videoMenu").hide()},subcodeFlowFun:function(){var e=$("#videoVehicleId").val(),i=$("#videoChannelNum").val(),n=($("#videoChannelType").val(),e+"-"+i);t.has(n)&&t.get(n).mediaPlayer.cmdSwitchStream("1");$("#videoMenu").hide()},scaleAreaShow:function(){1===$("#scaleRight").css("opacity")?$("#scaleRight").animate({opacity:0}):$("#scaleRight").animate({opacity:1})},defaultScaleFun:function(){var e=$("#videoDomId").val();$("#"+e).css("height","100%"),$("#videoMenu").hide()},twoScaleFun:function(){var e=$("#videoDomId").val();$("#"+e).css("height","75%"),$("#videoMenu").hide()},threeScaleFun:function(){var e=$("#videoDomId").val();$("#"+e).css("height","56%"),$("#videoMenu").hide()},takePhotoFun:function(){$("#snapText").val("");var e=$("#videoVehicleId").attr("value"),i=$("#videoChannelNum").attr("value"),n=e+"-"+i,o=t.get(n);a=o.mediaPlayer.videoScreenshots("canvasForVideo",524,400),$("#videoSnap .modal-dialog").css("width","600px"),$("#videoSnap .modal-body").css({height:"auto","max-height":$(window).height()-194+"px"}),$("#videoSnap").modal("show");var r=$.fn.zTree.getZTreeObj("vTreeList").getNodeByParam("id",e,null);$("#photoObjName").text(r.name),$("#photoObjColor").text(getPlateColor(r.plateColor)),$("#photoObjNumber").text(i),$("#vehicleId").attr("value",e),$("#videoMenu").hide()},videoWinFn:function(){$(this).hasClass("video-win")?($(this).removeClass("video-win").addClass("video-win-check"),r.tableListHide(),$(".video-main-left").hide(),$(".video-main-right").css("width","100%"),$("#realVideoFullScreen").unbind()):($(this).removeClass("video-win-check").addClass("video-win"),$(".video-main-left").show(),$(".video-main-right").css("width","calc(100% - 325px)"),$("#realVideoFullScreen").on("click",r.videoFullScreenFn))},snapSubmitFun:function(){var e=$("#photoObjNumber").text(),i=$("#snapText").val(),n=$("#vehicleId").attr("value");a.append("vehicleId",n),a.append("wayId",e),a.append("description",i),$.ajax({url:"/clbs/realTimeVideo/video/screenshot",data:a,type:"Post",dataType:"json",cache:!1,processData:!1,contentType:!1})},videoFullScreenFn:function(){!$("#videoMapAllShow").children().hasClass("fa fa-chevron-left")||($(this).hasClass("video-full-screen")?($(this).removeClass("video-full-screen").addClass("video-full-screen-check"),$("#map-module").hide(),$("#video-module").removeClass("col-md-9").addClass("col-md-12"),r.tableListHide(),$(".video-main-left").hide(),$(".video-main-right").css("width","100%"),$("#mainContent").addClass("main-full-screen"),$("#header").hide(),$("#newVideoWin, #realtimeScalingBtn").unbind()):($(this).removeClass("video-full-screen-check").addClass("video-full-screen"),$("#map-module").show(),$("#video-module").removeClass("com-md-12").addClass("col-md-9"),$(".video-main-left").show(),$(".video-main-right").css("width","calc(100% - 325px)"),$("#mainContent").removeClass("main-full-screen"),$("#header").show(),$("#newVideoWin").on("click",r.videoWinFn),$("#realtimeScalingBtn").on("click",window.Table.table.tableStateChange.bind(window.Table.table))),setTimeout((function(){window.Table.table.windowResize()}),300))},tableListHide:function(){$("#videoRightTop").css("height","calc(100% - 44px)"),this.videoSeparatedAdaptHide(),$("#realtimeScalingBtn").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-up")},videoSeparatedAdaptHide:function(){var e=$("#videoMainRight").height();if($("#videoFour").hasClass("video-four-check")){var i=50,n=(e-42)/2;$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"})}else if($("#videoSix").hasClass("video-six-check")){i=100/3,n=(e-42)/3,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"});var a=2*i,t=2*n;$("#video-module div.v-one").css({width:a+"%",height:"calc(100% - (100% - "+(t-.1)+"px))"})}else $("#videoNine").hasClass("video-nine-check")?(i=100/3,n=(e-42)/3,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"})):$("#videoTen").hasClass("video-ten-check")?(i=20,n=(e-42)/5,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"}),a=4*i,t=4*n,$("#video-module div.v-one").css({width:a+"%",height:"calc(100% - (100% - "+(t-.1)+"px))"})):$("#videoSixteen").hasClass("video-sixteen-check")&&(i=25,n=(e-42)/4,$("#video-module>div").css({width:i+"%",height:"calc(100% - (100% - "+n+"px))"}))},onBodyMouseDown:function(e){"rMenu"===e.target.id||$(e.target).parents("#rMenu").length>0||$("#rMenu").css({visibility:"hidden"}),"videoMenu"===e.target.id||$(e.target).parents("#videoMenu").length>0||$("#videoMenu").css("display","none")},setTreeModule:function(e){e},setTableModule:function(e){e},mousemoveFn:function(){this.updateWaitTime()}};window.VideoModule={video:r}},237:function(i,n){var a={mapAllShowFn:function(){console.log("bbb"),$(this).children().hasClass("fa fa-chevron-left")?($(this).children().removeClass("fa fa-chevron-left"),$(this).children().addClass("fa fa-chevron-right"),$("#video-module").css({position:"absolute",left:"-75%"}),$("#map-module").css("float","right"),$("#map-module").removeClass("col-md-3"),$("#map-module").addClass("col-md-12")):($(this).children().removeClass("fa fa-chevron-right"),$(this).children().addClass("fa fa-chevron-left"),$("#map-module").removeClass("col-md-12"),$("#map-module").addClass("col-md-3"),$("#video-module").css({position:"absolute",left:0}))},jumpToResource:function(){var i=$("#permissionUrls").val();if(null!=i&&i.split(",").indexOf("/realTimeVideo/resource/list")>-1)return!0;layer.msg("无操作权限，请联系管理员"),e.preventDefault()}};$("body").on("mousedown",(function(e){"rMenu"===e.target.id||$(e.target).parents("#realTimeVideo-rMenu").length>0||$("#realTimeVideo-rMenu").css({visibility:"hidden"}),"videoMenu"===e.target.id||$(e.target).parents("#videoMenu").length>0||$("#videoMenu").css("display","none")})),window.realTimeVideoMain={main:a}},256:function(e,i,n){"use strict";n.r(i);var a=n(223),t=n.n(a),o=(n(224),n(225)),r=n.n(o),l=(n(226),function(){function e(e,i){this.dependency=i,this.setOption(e)}return e.prototype.setOption=function(e){this.option=e,this.state={$origin:null,$dom:{$container:null},data:{allVsize:0}},this.state.$origin=$(e.selector),this.initHtml(),this.bindEvent()},e.prototype.initHtml=function(){var e=$(r.a);this.state.$origin.empty(),this.state.$origin.append(e),this.state.$dom.$container=e},e.prototype.bindEvent=function(){},e.prototype.destory=function(){this.state.$origin.empty()},e}()),d=n(227),s=n.n(d),c=(n(228),function(){function e(e,i){this.dependency=i,this.setOption(e)}return e.prototype.setOption=function(e){this.option=e,this.state={$origin:null,$dom:{$allVsize:null},data:{allVsize:0}},this.state.$origin=$(e.selector),this.initHtml(),this.bindEvent()},e.prototype.initHtml=function(){var e=$(s.a);this.state.$origin.empty(),this.state.$origin.append(e),this.state.$dom.$allVsize=e.find(".allSize")},e.prototype.bindEvent=function(){},e.prototype.destory=function(){this.state.$origin.empty()},e}()),m=n(229),u=n.n(m),v=(n(230),function(){function e(e,i){this.dependency=i,this.setOption(e)}return e.prototype.setOption=function(e){this.option=e,this.state={$origin:null,$dom:{$container:null},data:{allVsize:0}},this.state.$origin=$(e.selector),this.initHtml(),this.bindEvent()},e.prototype.initHtml=function(){var e=$(u.a);this.state.$origin.empty(),this.state.$origin.append(e),this.state.$dom.$container=e},e.prototype.bindEvent=function(){},e.prototype.destory=function(){this.state.$origin.empty()},e}()),h=n(22),p=n(175),g=(n(54),n(231),n(232),n(233),n(234),n(235),n(236),n(237),function(){function e(e,i){this.dependency=i,this.setOption(e)}return e.prototype.setOption=function(e){this.option=e,this.state={$origin:null,$dom:{$mapContiner:null},data:{filterDatas:null}},this.state.$origin=$(e.selector),this.initHtml(),this.bindEvent()},e.prototype.initHtml=function(){var e=$(t.a);this.state.$origin.empty(),this.state.$origin.append(e),this.renGlobalVariable(),this.renderContent()},e.prototype.renGlobalVariable=function(){var e=this.dependency.get("data"),i=Object(h.a)({access_token:e.get("access_token")}),n={access_token:e.get("access_token")};window.webSocket=i,window.headers=n,window.ungzip=p.a},e.prototype.renderContent=function(){new l({selector:"#treeModule"},this.dependency),new c({selector:"#tableModule"},this.dependency),new v({selector:"#videoHandleModule"},this.dependency)},e.prototype.bindEvent=function(){window.Map.map.init(),window.Tree.tree.init(),window.Table.table.init(),window.VideoModule.video.init(),$("#searchOffLine").on("click",{type:7},window.Tree.tree.ztreeReload.bind(window.Tree.tree)),$("#searchOnline").on("click",{type:1},window.Tree.tree.ztreeReload.bind(window.Tree.tree)),$("#searchHeartBeat").on("click",{type:9},window.Tree.tree.ztreeReload.bind(window.Tree.tree)),$("input").inputClear().on("onClearEvent",(function(e,i){"search_condition"===i.id&&window.Tree.tree.fuzzySearch.call(window.Tree.tree)})),$("#search_condition").on("input propertychange",window.Tree.tree.debounce.bind(window.Tree.tree)),$("#searchType").on("change",(function(){""!==$("#search_condition").val()&&window.Tree.tree.fuzzySearch.call(window.Tree.tree)})),$("#videoTreeRefresh").on("click",window.Tree.tree.refreshTree.bind(window.Tree.tree)),$("#closeVideo").on("click",window.VideoModule.video.singleVideoClose.bind(window.VideoModule.video)),$("#closeAllVideo").on("click",window.VideoModule.video.videoCloseFun.bind(window.VideoModule.video)),$("#mainCodeStream").on("click",window.VideoModule.video.mainCodeStreamFun.bind(window.VideoModule.video)),$("#subcodeFlow").on("click",window.VideoModule.video.subcodeFlowFun.bind(window.VideoModule.video)),$("#scaleShow").on("click",window.VideoModule.video.scaleAreaShow),$("#defaultScale").on("click",window.VideoModule.video.defaultScaleFun),$("#twoScale").on("click",window.VideoModule.video.twoScaleFun),$("#threeScale").on("click",window.VideoModule.video.threeScaleFun),$("#takePhoto").on("click",window.VideoModule.video.takePhotoFun),$("#window-4, #window-6, #window-9, #window-10, #window-16").on("click",window.VideoModule.video.videoSeparatedFn),$("#newVideoWin").on("click",window.VideoModule.video.videoWinFn),$("#snapSubmit").on("click",window.VideoModule.video.snapSubmitFun),$("#realVideoFullScreen").on("click",window.VideoModule.video.videoFullScreenFn),$("body").on("mousedown",window.VideoModule.video.onBodyMouseDown),$("body").on("mousemove",window.VideoModule.video.mousemoveFn.bind(window.VideoModule.video)),$("#videoMapAllShow").on("click",window.realTimeVideoMain.main.mapAllShowFn),$("#jumpToResource").on("click",window.realTimeVideoMain.main.jumpToResource),$("#videoTreeShowAliases").on("click",window.Tree.tree.showAliases.bind(window.Tree.tree)),$("#videoYunSett").on("click",window.Tree.tree.cloudStationFn),$("#videoDimming").on("click",window.Tree.tree.videoDimmingFn),$("#haeundaeModal").on("hidden.bs.modal",window.Tree.tree.cloudStationCloseFn),$("#haeundaeLight").on("click",window.Tree.tree.haeundaeLightCheckedFn),$("#haeundaeWipers").on("click",window.Tree.tree.haeundaeWipersCheckedFn),$("#zoomPlus, #zoomLess, #doublePlus, #doubleLess, #aperturePlus, #apertureLess").on("click",window.Tree.tree.zoomDoubleApertureFn),$("#haeundaeLeftTop, #haeundaeTop, #haeundaeRightTop, #haeundaeLeft, #haeundaeCenter, #haeundaeRight, #haeundaeLeftBottom, #haeundaeBottom, #haeundaeRightBottom").on("click",window.Tree.tree.haeundaeCameraPathFn),$(".haeundaeNstSlider").nstSlider({left_grip_selector:".leftGrip",value_changed_callback:function(e,i){window.Tree.tree.cloudSilderValueFn(i)}}),$("#wakeupSubmit").on("click",window.Tree.tree.wakeupSubmitFn.bind(window.Tree.tree)),$("#wakeupClose").on("click",window.Tree.tree.wakeupCloseFn.bind(window.Tree.tree)),$("#realtimeScalingBtn").on("click",window.Table.table.tableStateChange.bind(window.Table.table)),$("#warningManageListening").on("click",window.Table.table.goListen.bind(window.Table.table)),$("#warningManagePhoto").bind("click",window.Table.table.photo.bind(window.Table.table)),$("#warningManageSend").bind("click",window.Table.table.send.bind(window.Table.table)),$("#warningManageAffirm").bind("click",(function(){window.Table.table.handleAlarm("人工确认报警")})),$("#warningManageCancel").bind("click",(function(){window.Table.table.handleAlarm("不做处理")})),$("#warningManageFuture").bind("click",(function(){window.Table.table.handleAlarm("将来处理")})),$("#warningManageClose").on("click",(function(){$("#warningManage").modal("hide")})),$("#goTxtSendForAlarm").bind("click",window.Table.table.goTxtSendForAlarm),$("#goPhotographsForAlarm").bind("click",window.Table.table.takePhotoForAlarm),$("#goListeningForAlarm").bind("click",window.Table.table.listenForAlarm),$("#operationLog").on("click",window.Table.table.layoutResize.bind(window.Table.table)),$("#warnRecord").on("click",window.Table.table.layoutResize.bind(window.Table.table)),$(window).resize((function(){window.Table.table.windowResize()})),"admin"===$("#userName").text()?($("#setBtn").show(),$("#setBtn").on("click",window.Table.table.specialParamSetShow),$("#submitBtn").on("click",window.Table.table.doSubmit.bind(window.Table.table))):$("#setBtn").hide()},e.prototype.destory=function(){this.state.$origin.empty(),realTimeVideLoad.videoCloseSocket(null,null)},e}());i.default=g}}]);